{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.matchesMiddleware = matchesMiddleware;\nexports.isLocalURL = isLocalURL;\nexports.interpolateAs = interpolateAs;\nexports.resolveHref = resolveHref;\nexports.handleSmoothScroll = handleSmoothScroll;\nexports.createKey = createKey;\nexports.default = void 0;\n\nvar _async_to_generator = require(\"@swc/helpers/lib/_async_to_generator.js\").default;\n\nvar _extends = require(\"@swc/helpers/lib/_extends.js\").default;\n\nvar _interop_require_default = require(\"@swc/helpers/lib/_interop_require_default.js\").default;\n\nvar _interop_require_wildcard = require(\"@swc/helpers/lib/_interop_require_wildcard.js\").default;\n\nvar _normalizeTrailingSlash = require(\"../../../client/normalize-trailing-slash\");\n\nvar _removeTrailingSlash = require(\"./utils/remove-trailing-slash\");\n\nvar _routeLoader = require(\"../../../client/route-loader\");\n\nvar _script = require(\"../../../client/script\");\n\nvar _isError = _interop_require_wildcard(require(\"../../../lib/is-error\"));\n\nvar _denormalizePagePath = require(\"../page-path/denormalize-page-path\");\n\nvar _normalizeLocalePath = require(\"../i18n/normalize-locale-path\");\n\nvar _mitt = _interop_require_default(require(\"../mitt\"));\n\nvar _utils = require(\"../utils\");\n\nvar _isDynamic = require(\"./utils/is-dynamic\");\n\nvar _parseRelativeUrl = require(\"./utils/parse-relative-url\");\n\nvar _querystring = require(\"./utils/querystring\");\n\nvar _resolveRewrites = _interop_require_default(require(\"./utils/resolve-rewrites\"));\n\nvar _routeMatcher = require(\"./utils/route-matcher\");\n\nvar _routeRegex = require(\"./utils/route-regex\");\n\nvar _formatUrl = require(\"./utils/format-url\");\n\nvar _detectDomainLocale = require(\"../../../client/detect-domain-locale\");\n\nvar _parsePath = require(\"./utils/parse-path\");\n\nvar _addLocale = require(\"../../../client/add-locale\");\n\nvar _removeLocale = require(\"../../../client/remove-locale\");\n\nvar _removeBasePath = require(\"../../../client/remove-base-path\");\n\nvar _addBasePath = require(\"../../../client/add-base-path\");\n\nvar _hasBasePath = require(\"../../../client/has-base-path\");\n\nvar _isApiRoute = require(\"../../../lib/is-api-route\");\n\nvar _getNextPathnameInfo = require(\"./utils/get-next-pathname-info\");\n\nvar _formatNextPathnameInfo = require(\"./utils/format-next-pathname-info\");\n\nvar _compareStates = require(\"./utils/compare-states\");\n\nvar _isBot = require(\"./utils/is-bot\");\n\nfunction buildCancellationError() {\n  return Object.assign(new Error('Route Cancelled'), {\n    cancelled: true\n  });\n}\n\nfunction matchesMiddleware(options) {\n  return _matchesMiddleware.apply(this, arguments);\n}\n\nfunction _matchesMiddleware() {\n  _matchesMiddleware = _async_to_generator(function* (options) {\n    const matchers = yield Promise.resolve(options.router.pageLoader.getMiddleware());\n    if (!matchers) return false;\n    const {\n      pathname: asPathname\n    } = (0, _parsePath).parsePath(options.asPath); // remove basePath first since path prefix has to be in the order of `/${basePath}/${locale}`\n\n    const cleanedAs = (0, _hasBasePath).hasBasePath(asPathname) ? (0, _removeBasePath).removeBasePath(asPathname) : asPathname;\n    const asWithBasePathAndLocale = (0, _addBasePath).addBasePath((0, _addLocale).addLocale(cleanedAs, options.locale)); // Check only path match on client. Matching \"has\" should be done on server\n    // where we can access more info such as headers, HttpOnly cookie, etc.\n\n    return matchers.some(m => new RegExp(m.regexp).test(asWithBasePathAndLocale));\n  });\n  return _matchesMiddleware.apply(this, arguments);\n}\n\nfunction stripOrigin(url) {\n  const origin = (0, _utils).getLocationOrigin();\n  return url.startsWith(origin) ? url.substring(origin.length) : url;\n}\n\nfunction omit(object, keys) {\n  const omitted = {};\n  Object.keys(object).forEach(key => {\n    if (!keys.includes(key)) {\n      omitted[key] = object[key];\n    }\n  });\n  return omitted;\n}\n\nfunction isLocalURL(url) {\n  // prevent a hydration mismatch on href for url with anchor refs\n  if (!(0, _utils).isAbsoluteUrl(url)) return true;\n\n  try {\n    // absolute urls can be local if they are on the same origin\n    const locationOrigin = (0, _utils).getLocationOrigin();\n    const resolved = new URL(url, locationOrigin);\n    return resolved.origin === locationOrigin && (0, _hasBasePath).hasBasePath(resolved.pathname);\n  } catch (_) {\n    return false;\n  }\n}\n\nfunction interpolateAs(route, asPathname, query) {\n  let interpolatedRoute = '';\n  const dynamicRegex = (0, _routeRegex).getRouteRegex(route);\n  const dynamicGroups = dynamicRegex.groups;\n  const dynamicMatches = // Try to match the dynamic route against the asPath\n  (asPathname !== route ? (0, _routeMatcher).getRouteMatcher(dynamicRegex)(asPathname) : '') || // Fall back to reading the values from the href\n  // TODO: should this take priority; also need to change in the router.\n  query;\n  interpolatedRoute = route;\n  const params = Object.keys(dynamicGroups);\n\n  if (!params.every(param => {\n    let value = dynamicMatches[param] || '';\n    const {\n      repeat,\n      optional\n    } = dynamicGroups[param]; // support single-level catch-all\n    // TODO: more robust handling for user-error (passing `/`)\n\n    let replaced = `[${repeat ? '...' : ''}${param}]`;\n\n    if (optional) {\n      replaced = `${!value ? '/' : ''}[${replaced}]`;\n    }\n\n    if (repeat && !Array.isArray(value)) value = [value];\n    return (optional || param in dynamicMatches) && ( // Interpolate group into data URL if present\n    interpolatedRoute = interpolatedRoute.replace(replaced, repeat ? value.map( // these values should be fully encoded instead of just\n    // path delimiter escaped since they are being inserted\n    // into the URL and we expect URL encoded segments\n    // when parsing dynamic route params\n    segment => encodeURIComponent(segment)).join('/') : encodeURIComponent(value)) || '/');\n  })) {\n    interpolatedRoute = '' // did not satisfy all requirements\n    ; // n.b. We ignore this error because we handle warning for this case in\n    // development in the `<Link>` component directly.\n  }\n\n  return {\n    params,\n    result: interpolatedRoute\n  };\n}\n\nfunction resolveHref(router, href, resolveAs) {\n  // we use a dummy base url for relative urls\n  let base;\n  let urlAsString = typeof href === 'string' ? href : (0, _formatUrl).formatWithValidation(href); // repeated slashes and backslashes in the URL are considered\n  // invalid and will never match a Next.js page/file\n\n  const urlProtoMatch = urlAsString.match(/^[a-zA-Z]{1,}:\\/\\//);\n  const urlAsStringNoProto = urlProtoMatch ? urlAsString.slice(urlProtoMatch[0].length) : urlAsString;\n  const urlParts = urlAsStringNoProto.split('?');\n\n  if ((urlParts[0] || '').match(/(\\/\\/|\\\\)/)) {\n    console.error(`Invalid href passed to next/router: ${urlAsString}, repeated forward-slashes (//) or backslashes \\\\ are not valid in the href`);\n    const normalizedUrl = (0, _utils).normalizeRepeatedSlashes(urlAsStringNoProto);\n    urlAsString = (urlProtoMatch ? urlProtoMatch[0] : '') + normalizedUrl;\n  } // Return because it cannot be routed by the Next.js router\n\n\n  if (!isLocalURL(urlAsString)) {\n    return resolveAs ? [urlAsString] : urlAsString;\n  }\n\n  try {\n    base = new URL(urlAsString.startsWith('#') ? router.asPath : router.pathname, 'http://n');\n  } catch (_) {\n    // fallback to / for invalid asPath values e.g. //\n    base = new URL('/', 'http://n');\n  }\n\n  try {\n    const finalUrl = new URL(urlAsString, base);\n    finalUrl.pathname = (0, _normalizeTrailingSlash).normalizePathTrailingSlash(finalUrl.pathname);\n    let interpolatedAs = '';\n\n    if ((0, _isDynamic).isDynamicRoute(finalUrl.pathname) && finalUrl.searchParams && resolveAs) {\n      const query = (0, _querystring).searchParamsToUrlQuery(finalUrl.searchParams);\n      const {\n        result,\n        params\n      } = interpolateAs(finalUrl.pathname, finalUrl.pathname, query);\n\n      if (result) {\n        interpolatedAs = (0, _formatUrl).formatWithValidation({\n          pathname: result,\n          hash: finalUrl.hash,\n          query: omit(query, params)\n        });\n      }\n    } // if the origin didn't change, it means we received a relative href\n\n\n    const resolvedHref = finalUrl.origin === base.origin ? finalUrl.href.slice(finalUrl.origin.length) : finalUrl.href;\n    return resolveAs ? [resolvedHref, interpolatedAs || resolvedHref] : resolvedHref;\n  } catch (_1) {\n    return resolveAs ? [urlAsString] : urlAsString;\n  }\n}\n\nfunction prepareUrlAs(router, url, as) {\n  // If url and as provided as an object representation,\n  // we'll format them into the string version here.\n  let [resolvedHref, resolvedAs] = resolveHref(router, url, true);\n  const origin = (0, _utils).getLocationOrigin();\n  const hrefWasAbsolute = resolvedHref.startsWith(origin);\n  const asWasAbsolute = resolvedAs && resolvedAs.startsWith(origin);\n  resolvedHref = stripOrigin(resolvedHref);\n  resolvedAs = resolvedAs ? stripOrigin(resolvedAs) : resolvedAs;\n  const preparedUrl = hrefWasAbsolute ? resolvedHref : (0, _addBasePath).addBasePath(resolvedHref);\n  const preparedAs = as ? stripOrigin(resolveHref(router, as)) : resolvedAs || resolvedHref;\n  return {\n    url: preparedUrl,\n    as: asWasAbsolute ? preparedAs : (0, _addBasePath).addBasePath(preparedAs)\n  };\n}\n\nfunction resolveDynamicRoute(pathname, pages) {\n  const cleanPathname = (0, _removeTrailingSlash).removeTrailingSlash((0, _denormalizePagePath).denormalizePagePath(pathname));\n\n  if (cleanPathname === '/404' || cleanPathname === '/_error') {\n    return pathname;\n  } // handle resolving href for dynamic routes\n\n\n  if (!pages.includes(cleanPathname)) {\n    // eslint-disable-next-line array-callback-return\n    pages.some(page => {\n      if ((0, _isDynamic).isDynamicRoute(page) && (0, _routeRegex).getRouteRegex(page).re.test(cleanPathname)) {\n        pathname = page;\n        return true;\n      }\n    });\n  }\n\n  return (0, _removeTrailingSlash).removeTrailingSlash(pathname);\n}\n\nfunction getMiddlewareData(source, response, options) {\n  const nextConfig = {\n    basePath: options.router.basePath,\n    i18n: {\n      locales: options.router.locales\n    },\n    trailingSlash: Boolean(process.env.__NEXT_TRAILING_SLASH)\n  };\n  const rewriteHeader = response.headers.get('x-nextjs-rewrite');\n  let rewriteTarget = rewriteHeader || response.headers.get('x-nextjs-matched-path');\n  const matchedPath = response.headers.get('x-matched-path');\n\n  if (matchedPath && !rewriteTarget && !matchedPath.includes('__next_data_catchall') && !matchedPath.includes('/_error') && !matchedPath.includes('/404')) {\n    // leverage x-matched-path to detect next.config.js rewrites\n    rewriteTarget = matchedPath;\n  }\n\n  if (rewriteTarget) {\n    if (rewriteTarget.startsWith('/')) {\n      const parsedRewriteTarget = (0, _parseRelativeUrl).parseRelativeUrl(rewriteTarget);\n      const pathnameInfo = (0, _getNextPathnameInfo).getNextPathnameInfo(parsedRewriteTarget.pathname, {\n        nextConfig,\n        parseData: true\n      });\n      let fsPathname = (0, _removeTrailingSlash).removeTrailingSlash(pathnameInfo.pathname);\n      return Promise.all([options.router.pageLoader.getPageList(), (0, _routeLoader).getClientBuildManifest()]).then(_ref => {\n        let [pages, {\n          __rewrites: rewrites\n        }] = _ref;\n        let as = (0, _addLocale).addLocale(pathnameInfo.pathname, pathnameInfo.locale);\n\n        if ((0, _isDynamic).isDynamicRoute(as) || !rewriteHeader && pages.includes((0, _normalizeLocalePath).normalizeLocalePath((0, _removeBasePath).removeBasePath(as), options.router.locales).pathname)) {\n          const parsedSource = (0, _getNextPathnameInfo).getNextPathnameInfo((0, _parseRelativeUrl).parseRelativeUrl(source).pathname, {\n            parseData: true\n          });\n          as = (0, _addBasePath).addBasePath(parsedSource.pathname);\n          parsedRewriteTarget.pathname = as;\n        }\n\n        if (process.env.__NEXT_HAS_REWRITES) {\n          const result = (0, _resolveRewrites).default(as, pages, rewrites, parsedRewriteTarget.query, path => resolveDynamicRoute(path, pages), options.router.locales);\n\n          if (result.matchedPage) {\n            parsedRewriteTarget.pathname = result.parsedAs.pathname;\n            as = parsedRewriteTarget.pathname;\n            Object.assign(parsedRewriteTarget.query, result.parsedAs.query);\n          }\n        } else if (!pages.includes(fsPathname)) {\n          const resolvedPathname = resolveDynamicRoute(fsPathname, pages);\n\n          if (resolvedPathname !== fsPathname) {\n            fsPathname = resolvedPathname;\n          }\n        }\n\n        const resolvedHref = !pages.includes(fsPathname) ? resolveDynamicRoute((0, _normalizeLocalePath).normalizeLocalePath((0, _removeBasePath).removeBasePath(parsedRewriteTarget.pathname), options.router.locales).pathname, pages) : fsPathname;\n\n        if ((0, _isDynamic).isDynamicRoute(resolvedHref)) {\n          const matches = (0, _routeMatcher).getRouteMatcher((0, _routeRegex).getRouteRegex(resolvedHref))(as);\n          Object.assign(parsedRewriteTarget.query, matches || {});\n        }\n\n        return {\n          type: 'rewrite',\n          parsedAs: parsedRewriteTarget,\n          resolvedHref\n        };\n      });\n    }\n\n    const src = (0, _parsePath).parsePath(source);\n    const pathname = (0, _formatNextPathnameInfo).formatNextPathnameInfo(_extends({}, (0, _getNextPathnameInfo).getNextPathnameInfo(src.pathname, {\n      nextConfig,\n      parseData: true\n    }), {\n      defaultLocale: options.router.defaultLocale,\n      buildId: ''\n    }));\n    return Promise.resolve({\n      type: 'redirect-external',\n      destination: `${pathname}${src.query}${src.hash}`\n    });\n  }\n\n  const redirectTarget = response.headers.get('x-nextjs-redirect');\n\n  if (redirectTarget) {\n    if (redirectTarget.startsWith('/')) {\n      const src = (0, _parsePath).parsePath(redirectTarget);\n      const pathname = (0, _formatNextPathnameInfo).formatNextPathnameInfo(_extends({}, (0, _getNextPathnameInfo).getNextPathnameInfo(src.pathname, {\n        nextConfig,\n        parseData: true\n      }), {\n        defaultLocale: options.router.defaultLocale,\n        buildId: ''\n      }));\n      return Promise.resolve({\n        type: 'redirect-internal',\n        newAs: `${pathname}${src.query}${src.hash}`,\n        newUrl: `${pathname}${src.query}${src.hash}`\n      });\n    }\n\n    return Promise.resolve({\n      type: 'redirect-external',\n      destination: redirectTarget\n    });\n  }\n\n  return Promise.resolve({\n    type: 'next'\n  });\n}\n\nfunction withMiddlewareEffects(options) {\n  return _withMiddlewareEffects.apply(this, arguments);\n}\n\nfunction _withMiddlewareEffects() {\n  _withMiddlewareEffects = _async_to_generator(function* (options) {\n    const matches = yield matchesMiddleware(options);\n\n    if (!matches || !options.fetchData) {\n      return null;\n    }\n\n    try {\n      const data = yield options.fetchData();\n      const effect = yield getMiddlewareData(data.dataHref, data.response, options);\n      return {\n        dataHref: data.dataHref,\n        json: data.json,\n        response: data.response,\n        text: data.text,\n        cacheKey: data.cacheKey,\n        effect\n      };\n    } catch (e) {\n      /**\n      * TODO: Revisit this in the future.\n      * For now we will not consider middleware data errors to be fatal.\n      * maybe we should revisit in the future.\n      */\n      return null;\n    }\n  });\n  return _withMiddlewareEffects.apply(this, arguments);\n}\n\nconst manualScrollRestoration = process.env.__NEXT_SCROLL_RESTORATION && typeof window !== 'undefined' && 'scrollRestoration' in window.history && !!function () {\n  try {\n    let v = '__next'; // eslint-disable-next-line no-sequences\n\n    return sessionStorage.setItem(v, v), sessionStorage.removeItem(v), true;\n  } catch (n) {}\n}();\nconst SSG_DATA_NOT_FOUND = Symbol('SSG_DATA_NOT_FOUND');\n\nfunction fetchRetry(url, attempts, options) {\n  return fetch(url, {\n    // Cookies are required to be present for Next.js' SSG \"Preview Mode\".\n    // Cookies may also be required for `getServerSideProps`.\n    //\n    // > `fetch` wonâ€™t send cookies, unless you set the credentials init\n    // > option.\n    // https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch\n    //\n    // > For maximum browser compatibility when it comes to sending &\n    // > receiving cookies, always supply the `credentials: 'same-origin'`\n    // > option instead of relying on the default.\n    // https://github.com/github/fetch#caveats\n    credentials: 'same-origin',\n    method: options.method || 'GET',\n    headers: Object.assign({}, options.headers, {\n      'x-nextjs-data': '1'\n    })\n  }).then(response => {\n    return !response.ok && attempts > 1 && response.status >= 500 ? fetchRetry(url, attempts - 1, options) : response;\n  });\n}\n\nfunction handleSmoothScroll(fn) {\n  let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const htmlElement = document.documentElement;\n  const existing = htmlElement.style.scrollBehavior;\n  htmlElement.style.scrollBehavior = 'auto';\n\n  if (!options.dontForceLayout) {\n    // In Chrome-based browsers we need to force reflow before calling `scrollTo`.\n    // Otherwise it will not pickup the change in scrollBehavior\n    // More info here: https://github.com/vercel/next.js/issues/40719#issuecomment-1336248042\n    htmlElement.getClientRects();\n  }\n\n  fn();\n  htmlElement.style.scrollBehavior = existing;\n}\n\nfunction tryToParseAsJSON(text) {\n  try {\n    return JSON.parse(text);\n  } catch (error) {\n    return null;\n  }\n}\n\nfunction fetchNextData(_ref2) {\n  let {\n    dataHref,\n    inflightCache,\n    isPrefetch,\n    hasMiddleware,\n    isServerRender,\n    parseJSON,\n    persistCache,\n    isBackground,\n    unstable_skipClientCache\n  } = _ref2;\n  const {\n    href: cacheKey\n  } = new URL(dataHref, window.location.href);\n  var ref1;\n\n  const getData = params => {\n    return fetchRetry(dataHref, isServerRender ? 3 : 1, {\n      headers: Object.assign({}, isPrefetch ? {\n        purpose: 'prefetch'\n      } : {}, isPrefetch && hasMiddleware ? {\n        'x-middleware-prefetch': '1'\n      } : {}),\n      method: (ref1 = params == null ? void 0 : params.method) != null ? ref1 : 'GET'\n    }).then(response => {\n      if (response.ok && (params == null ? void 0 : params.method) === 'HEAD') {\n        return {\n          dataHref,\n          response,\n          text: '',\n          json: {},\n          cacheKey\n        };\n      }\n\n      return response.text().then(text => {\n        if (!response.ok) {\n          /**\n          * When the data response is a redirect because of a middleware\n          * we do not consider it an error. The headers must bring the\n          * mapped location.\n          * TODO: Change the status code in the handler.\n          */\n          if (hasMiddleware && [301, 302, 307, 308].includes(response.status)) {\n            return {\n              dataHref,\n              response,\n              text,\n              json: {},\n              cacheKey\n            };\n          }\n\n          if (!hasMiddleware && response.status === 404) {\n            var ref;\n\n            if ((ref = tryToParseAsJSON(text)) == null ? void 0 : ref.notFound) {\n              return {\n                dataHref,\n                json: {\n                  notFound: SSG_DATA_NOT_FOUND\n                },\n                response,\n                text,\n                cacheKey\n              };\n            }\n          }\n\n          const error = new Error(`Failed to load static props`);\n          /**\n          * We should only trigger a server-side transition if this was\n          * caused on a client-side transition. Otherwise, we'd get into\n          * an infinite loop.\n          */\n\n          if (!isServerRender) {\n            (0, _routeLoader).markAssetError(error);\n          }\n\n          throw error;\n        }\n\n        return {\n          dataHref,\n          json: parseJSON ? tryToParseAsJSON(text) : null,\n          response,\n          text,\n          cacheKey\n        };\n      });\n    }).then(data => {\n      if (!persistCache || process.env.NODE_ENV !== 'production' || data.response.headers.get('x-middleware-cache') === 'no-cache') {\n        delete inflightCache[cacheKey];\n      }\n\n      return data;\n    }).catch(err => {\n      if (!unstable_skipClientCache) {\n        delete inflightCache[cacheKey];\n      }\n\n      if ( // chrome\n      err.message === 'Failed to fetch' || // firefox\n      err.message === 'NetworkError when attempting to fetch resource.' || // safari\n      err.message === 'Load failed') {\n        (0, _routeLoader).markAssetError(err);\n      }\n\n      throw err;\n    });\n  }; // when skipping client cache we wait to update\n  // inflight cache until successful data response\n  // this allows racing click event with fetching newer data\n  // without blocking navigation when stale data is available\n\n\n  if (unstable_skipClientCache && persistCache) {\n    return getData({}).then(data => {\n      inflightCache[cacheKey] = Promise.resolve(data);\n      return data;\n    });\n  }\n\n  if (inflightCache[cacheKey] !== undefined) {\n    return inflightCache[cacheKey];\n  }\n\n  return inflightCache[cacheKey] = getData(isBackground ? {\n    method: 'HEAD'\n  } : {});\n}\n\nfunction createKey() {\n  return Math.random().toString(36).slice(2, 10);\n}\n\nfunction handleHardNavigation(_ref3) {\n  let {\n    url,\n    router\n  } = _ref3;\n\n  // ensure we don't trigger a hard navigation to the same\n  // URL as this can end up with an infinite refresh\n  if (url === (0, _addBasePath).addBasePath((0, _addLocale).addLocale(router.asPath, router.locale))) {\n    throw new Error(`Invariant: attempted to hard navigate to the same URL ${url} ${location.href}`);\n  }\n\n  window.location.href = url;\n}\n\nconst getCancelledHandler = _ref4 => {\n  let {\n    route,\n    router\n  } = _ref4;\n  let cancelled = false;\n\n  const cancel = router.clc = () => {\n    cancelled = true;\n  };\n\n  const handleCancelled = () => {\n    if (cancelled) {\n      const error = new Error(`Abort fetching component for route: \"${route}\"`);\n      error.cancelled = true;\n      throw error;\n    }\n\n    if (cancel === router.clc) {\n      router.clc = null;\n    }\n  };\n\n  return handleCancelled;\n};\n\nclass Router {\n  reload() {\n    window.location.reload();\n  }\n  /**\n  * Go back in history\n  */\n\n\n  back() {\n    window.history.back();\n  }\n  /**\n  * Go forward in history\n  */\n\n\n  forward() {\n    window.history.forward();\n  }\n  /**\n  * Performs a `pushState` with arguments\n  * @param url of the route\n  * @param as masks `url` for the browser\n  * @param options object you can define `shallow` and other options\n  */\n\n\n  push(url, as) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    if (process.env.__NEXT_SCROLL_RESTORATION) {\n      // TODO: remove in the future when we update history before route change\n      // is complete, as the popstate event should handle this capture.\n      if (manualScrollRestoration) {\n        try {\n          // Snapshot scroll position right before navigating to a new page:\n          sessionStorage.setItem('__next_scroll_' + this._key, JSON.stringify({\n            x: self.pageXOffset,\n            y: self.pageYOffset\n          }));\n        } catch (e) {}\n      }\n    }\n\n    ({\n      url,\n      as\n    } = prepareUrlAs(this, url, as));\n    return this.change('pushState', url, as, options);\n  }\n  /**\n  * Performs a `replaceState` with arguments\n  * @param url of the route\n  * @param as masks `url` for the browser\n  * @param options object you can define `shallow` and other options\n  */\n\n\n  replace(url, as) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    ({\n      url,\n      as\n    } = prepareUrlAs(this, url, as));\n    return this.change('replaceState', url, as, options);\n  }\n\n  change(method, url, as, options, forcedScroll) {\n    var _this = this;\n\n    return _async_to_generator(function* () {\n      if (!isLocalURL(url)) {\n        handleHardNavigation({\n          url,\n          router: _this\n        });\n        return false;\n      } // WARNING: `_h` is an internal option for handing Next.js client-side\n      // hydration. Your app should _never_ use this property. It may change at\n      // any time without notice.\n\n\n      const isQueryUpdating = options._h === 1;\n      let shouldResolveHref = isQueryUpdating || options._shouldResolveHref || (0, _parsePath).parsePath(url).pathname === (0, _parsePath).parsePath(as).pathname;\n\n      const nextState = _extends({}, _this.state); // for static pages with query params in the URL we delay\n      // marking the router ready until after the query is updated\n      // or a navigation has occurred\n\n\n      const readyStateChange = _this.isReady !== true;\n      _this.isReady = true;\n      const isSsr = _this.isSsr;\n\n      if (!isQueryUpdating) {\n        _this.isSsr = false;\n      } // if a route transition is already in progress before\n      // the query updating is triggered ignore query updating\n\n\n      if (isQueryUpdating && _this.clc) {\n        return false;\n      }\n\n      const prevLocale = nextState.locale;\n\n      if (process.env.__NEXT_I18N_SUPPORT) {\n        nextState.locale = options.locale === false ? _this.defaultLocale : options.locale || nextState.locale;\n\n        if (typeof options.locale === 'undefined') {\n          options.locale = nextState.locale;\n        }\n\n        const parsedAs = (0, _parseRelativeUrl).parseRelativeUrl((0, _hasBasePath).hasBasePath(as) ? (0, _removeBasePath).removeBasePath(as) : as);\n        const localePathResult = (0, _normalizeLocalePath).normalizeLocalePath(parsedAs.pathname, _this.locales);\n\n        if (localePathResult.detectedLocale) {\n          nextState.locale = localePathResult.detectedLocale;\n          parsedAs.pathname = (0, _addBasePath).addBasePath(parsedAs.pathname);\n          as = (0, _formatUrl).formatWithValidation(parsedAs);\n          url = (0, _addBasePath).addBasePath((0, _normalizeLocalePath).normalizeLocalePath((0, _hasBasePath).hasBasePath(url) ? (0, _removeBasePath).removeBasePath(url) : url, _this.locales).pathname);\n        }\n\n        let didNavigate = false; // we need to wrap this in the env check again since regenerator runtime\n        // moves this on its own due to the return\n\n        if (process.env.__NEXT_I18N_SUPPORT) {\n          var ref; // if the locale isn't configured hard navigate to show 404 page\n\n          if (!((ref = _this.locales) == null ? void 0 : ref.includes(nextState.locale))) {\n            parsedAs.pathname = (0, _addLocale).addLocale(parsedAs.pathname, nextState.locale);\n            handleHardNavigation({\n              url: (0, _formatUrl).formatWithValidation(parsedAs),\n              router: _this\n            }); // this was previously a return but was removed in favor\n            // of better dead code elimination with regenerator runtime\n\n            didNavigate = true;\n          }\n        }\n\n        const detectedDomain = (0, _detectDomainLocale).detectDomainLocale(_this.domainLocales, undefined, nextState.locale); // we need to wrap this in the env check again since regenerator runtime\n        // moves this on its own due to the return\n\n        if (process.env.__NEXT_I18N_SUPPORT) {\n          // if we are navigating to a domain locale ensure we redirect to the\n          // correct domain\n          if (!didNavigate && detectedDomain && _this.isLocaleDomain && self.location.hostname !== detectedDomain.domain) {\n            const asNoBasePath = (0, _removeBasePath).removeBasePath(as);\n            handleHardNavigation({\n              url: `http${detectedDomain.http ? '' : 's'}://${detectedDomain.domain}${(0, _addBasePath).addBasePath(`${nextState.locale === detectedDomain.defaultLocale ? '' : `/${nextState.locale}`}${asNoBasePath === '/' ? '' : asNoBasePath}` || '/')}`,\n              router: _this\n            }); // this was previously a return but was removed in favor\n            // of better dead code elimination with regenerator runtime\n\n            didNavigate = true;\n          }\n        }\n\n        if (didNavigate) {\n          return new Promise(() => {});\n        }\n      } // marking route changes as a navigation start entry\n\n\n      if (_utils.ST) {\n        performance.mark('routeChange');\n      }\n\n      const {\n        shallow = false,\n        scroll = true\n      } = options;\n      const routeProps = {\n        shallow\n      };\n\n      if (_this._inFlightRoute && _this.clc) {\n        if (!isSsr) {\n          Router.events.emit('routeChangeError', buildCancellationError(), _this._inFlightRoute, routeProps);\n        }\n\n        _this.clc();\n\n        _this.clc = null;\n      }\n\n      as = (0, _addBasePath).addBasePath((0, _addLocale).addLocale((0, _hasBasePath).hasBasePath(as) ? (0, _removeBasePath).removeBasePath(as) : as, options.locale, _this.defaultLocale));\n      const cleanedAs = (0, _removeLocale).removeLocale((0, _hasBasePath).hasBasePath(as) ? (0, _removeBasePath).removeBasePath(as) : as, nextState.locale);\n      _this._inFlightRoute = as;\n      const localeChange = prevLocale !== nextState.locale; // If the url change is only related to a hash change\n      // We should not proceed. We should only change the state.\n\n      if (!isQueryUpdating && _this.onlyAHashChange(cleanedAs) && !localeChange) {\n        nextState.asPath = cleanedAs;\n        Router.events.emit('hashChangeStart', as, routeProps); // TODO: do we need the resolved href when only a hash change?\n\n        _this.changeState(method, url, as, _extends({}, options, {\n          scroll: false\n        }));\n\n        if (scroll) {\n          _this.scrollToHash(cleanedAs);\n        }\n\n        try {\n          yield _this.set(nextState, _this.components[nextState.route], null);\n        } catch (err) {\n          if ((0, _isError).default(err) && err.cancelled) {\n            Router.events.emit('routeChangeError', err, cleanedAs, routeProps);\n          }\n\n          throw err;\n        }\n\n        Router.events.emit('hashChangeComplete', as, routeProps);\n        return true;\n      }\n\n      let parsed = (0, _parseRelativeUrl).parseRelativeUrl(url);\n      let {\n        pathname,\n        query\n      } = parsed; // The build manifest needs to be loaded before auto-static dynamic pages\n      // get their query parameters to allow ensuring they can be parsed properly\n      // when rewritten to\n\n      let pages, rewrites;\n\n      try {\n        [pages, {\n          __rewrites: rewrites\n        }] = yield Promise.all([_this.pageLoader.getPageList(), (0, _routeLoader).getClientBuildManifest(), _this.pageLoader.getMiddleware()]);\n      } catch (err) {\n        // If we fail to resolve the page list or client-build manifest, we must\n        // do a server-side transition:\n        handleHardNavigation({\n          url: as,\n          router: _this\n        });\n        return false;\n      } // If asked to change the current URL we should reload the current page\n      // (not location.reload() but reload getInitialProps and other Next.js stuffs)\n      // We also need to set the method = replaceState always\n      // as this should not go into the history (That's how browsers work)\n      // We should compare the new asPath to the current asPath, not the url\n\n\n      if (!_this.urlIsNew(cleanedAs) && !localeChange) {\n        method = 'replaceState';\n      } // we need to resolve the as value using rewrites for dynamic SSG\n      // pages to allow building the data URL correctly\n\n\n      let resolvedAs = as; // url and as should always be prefixed with basePath by this\n      // point by either next/link or router.push/replace so strip the\n      // basePath from the pathname to match the pages dir 1-to-1\n\n      pathname = pathname ? (0, _removeTrailingSlash).removeTrailingSlash((0, _removeBasePath).removeBasePath(pathname)) : pathname;\n      let route = (0, _removeTrailingSlash).removeTrailingSlash(pathname);\n      const parsedAsPathname = as.startsWith('/') && (0, _parseRelativeUrl).parseRelativeUrl(as).pathname;\n      const isMiddlewareRewrite = !!(parsedAsPathname && route !== parsedAsPathname && (!(0, _isDynamic).isDynamicRoute(route) || !(0, _routeMatcher).getRouteMatcher((0, _routeRegex).getRouteRegex(route))(parsedAsPathname))); // we don't attempt resolve asPath when we need to execute\n      // middleware as the resolving will occur server-side\n\n      const isMiddlewareMatch = !options.shallow && (yield matchesMiddleware({\n        asPath: as,\n        locale: nextState.locale,\n        router: _this\n      }));\n\n      if (isQueryUpdating && isMiddlewareMatch) {\n        shouldResolveHref = false;\n      }\n\n      if (shouldResolveHref && pathname !== '/_error') {\n        options._shouldResolveHref = true;\n\n        if (process.env.__NEXT_HAS_REWRITES && as.startsWith('/')) {\n          const rewritesResult = (0, _resolveRewrites).default((0, _addBasePath).addBasePath((0, _addLocale).addLocale(cleanedAs, nextState.locale), true), pages, rewrites, query, p => resolveDynamicRoute(p, pages), _this.locales);\n\n          if (rewritesResult.externalDest) {\n            handleHardNavigation({\n              url: as,\n              router: _this\n            });\n            return true;\n          }\n\n          if (!isMiddlewareMatch) {\n            resolvedAs = rewritesResult.asPath;\n          }\n\n          if (rewritesResult.matchedPage && rewritesResult.resolvedHref) {\n            // if this directly matches a page we need to update the href to\n            // allow the correct page chunk to be loaded\n            pathname = rewritesResult.resolvedHref;\n            parsed.pathname = (0, _addBasePath).addBasePath(pathname);\n\n            if (!isMiddlewareMatch) {\n              url = (0, _formatUrl).formatWithValidation(parsed);\n            }\n          }\n        } else {\n          parsed.pathname = resolveDynamicRoute(pathname, pages);\n\n          if (parsed.pathname !== pathname) {\n            pathname = parsed.pathname;\n            parsed.pathname = (0, _addBasePath).addBasePath(pathname);\n\n            if (!isMiddlewareMatch) {\n              url = (0, _formatUrl).formatWithValidation(parsed);\n            }\n          }\n        }\n      }\n\n      if (!isLocalURL(as)) {\n        if (process.env.NODE_ENV !== 'production') {\n          throw new Error(`Invalid href: \"${url}\" and as: \"${as}\", received relative href and external as` + `\\nSee more info: https://nextjs.org/docs/messages/invalid-relative-url-external-as`);\n        }\n\n        handleHardNavigation({\n          url: as,\n          router: _this\n        });\n        return false;\n      }\n\n      resolvedAs = (0, _removeLocale).removeLocale((0, _removeBasePath).removeBasePath(resolvedAs), nextState.locale);\n      route = (0, _removeTrailingSlash).removeTrailingSlash(pathname);\n      let routeMatch = false;\n\n      if ((0, _isDynamic).isDynamicRoute(route)) {\n        const parsedAs = (0, _parseRelativeUrl).parseRelativeUrl(resolvedAs);\n        const asPathname = parsedAs.pathname;\n        const routeRegex = (0, _routeRegex).getRouteRegex(route);\n        routeMatch = (0, _routeMatcher).getRouteMatcher(routeRegex)(asPathname);\n        const shouldInterpolate = route === asPathname;\n        const interpolatedAs = shouldInterpolate ? interpolateAs(route, asPathname, query) : {};\n\n        if (!routeMatch || shouldInterpolate && !interpolatedAs.result) {\n          const missingParams = Object.keys(routeRegex.groups).filter(param => !query[param] && !routeRegex.groups[param].optional);\n\n          if (missingParams.length > 0 && !isMiddlewareMatch) {\n            if (process.env.NODE_ENV !== 'production') {\n              console.warn(`${shouldInterpolate ? `Interpolating href` : `Mismatching \\`as\\` and \\`href\\``} failed to manually provide ` + `the params: ${missingParams.join(', ')} in the \\`href\\`'s \\`query\\``);\n            }\n\n            throw new Error((shouldInterpolate ? `The provided \\`href\\` (${url}) value is missing query values (${missingParams.join(', ')}) to be interpolated properly. ` : `The provided \\`as\\` value (${asPathname}) is incompatible with the \\`href\\` value (${route}). `) + `Read more: https://nextjs.org/docs/messages/${shouldInterpolate ? 'href-interpolation-failed' : 'incompatible-href-as'}`);\n          }\n        } else if (shouldInterpolate) {\n          as = (0, _formatUrl).formatWithValidation(Object.assign({}, parsedAs, {\n            pathname: interpolatedAs.result,\n            query: omit(query, interpolatedAs.params)\n          }));\n        } else {\n          // Merge params into `query`, overwriting any specified in search\n          Object.assign(query, routeMatch);\n        }\n      }\n\n      if (!isQueryUpdating) {\n        Router.events.emit('routeChangeStart', as, routeProps);\n      }\n\n      try {\n        var ref2, ref3, ref4;\n        let routeInfo = yield _this.getRouteInfo({\n          route,\n          pathname,\n          query,\n          as,\n          resolvedAs,\n          routeProps,\n          locale: nextState.locale,\n          isPreview: nextState.isPreview,\n          hasMiddleware: isMiddlewareMatch,\n          unstable_skipClientCache: options.unstable_skipClientCache,\n          isQueryUpdating: isQueryUpdating && !_this.isFallback,\n          isMiddlewareRewrite\n        });\n\n        if ('route' in routeInfo && isMiddlewareMatch) {\n          pathname = routeInfo.route || route;\n          route = pathname;\n\n          if (!routeProps.shallow) {\n            query = Object.assign({}, routeInfo.query || {}, query);\n          }\n\n          const cleanedParsedPathname = (0, _hasBasePath).hasBasePath(parsed.pathname) ? (0, _removeBasePath).removeBasePath(parsed.pathname) : parsed.pathname;\n\n          if (routeMatch && pathname !== cleanedParsedPathname) {\n            Object.keys(routeMatch).forEach(key => {\n              if (routeMatch && query[key] === routeMatch[key]) {\n                delete query[key];\n              }\n            });\n          }\n\n          if ((0, _isDynamic).isDynamicRoute(pathname)) {\n            const prefixedAs = !routeProps.shallow && routeInfo.resolvedAs ? routeInfo.resolvedAs : (0, _addBasePath).addBasePath((0, _addLocale).addLocale(new URL(as, location.href).pathname, nextState.locale), true);\n            let rewriteAs = prefixedAs;\n\n            if ((0, _hasBasePath).hasBasePath(rewriteAs)) {\n              rewriteAs = (0, _removeBasePath).removeBasePath(rewriteAs);\n            }\n\n            if (process.env.__NEXT_I18N_SUPPORT) {\n              const localeResult = (0, _normalizeLocalePath).normalizeLocalePath(rewriteAs, _this.locales);\n              nextState.locale = localeResult.detectedLocale || nextState.locale;\n              rewriteAs = localeResult.pathname;\n            }\n\n            const routeRegex = (0, _routeRegex).getRouteRegex(pathname);\n            const curRouteMatch = (0, _routeMatcher).getRouteMatcher(routeRegex)(new URL(rewriteAs, location.href).pathname);\n\n            if (curRouteMatch) {\n              Object.assign(query, curRouteMatch);\n            }\n          }\n        } // If the routeInfo brings a redirect we simply apply it.\n\n\n        if ('type' in routeInfo) {\n          if (routeInfo.type === 'redirect-internal') {\n            return _this.change(method, routeInfo.newUrl, routeInfo.newAs, options);\n          } else {\n            handleHardNavigation({\n              url: routeInfo.destination,\n              router: _this\n            });\n            return new Promise(() => {});\n          }\n        }\n\n        const component = routeInfo.Component;\n\n        if (component && component.unstable_scriptLoader) {\n          const scripts = [].concat(component.unstable_scriptLoader());\n          scripts.forEach(script => {\n            (0, _script).handleClientScriptLoad(script.props);\n          });\n        } // handle redirect on client-transition\n\n\n        if ((routeInfo.__N_SSG || routeInfo.__N_SSP) && routeInfo.props) {\n          if (routeInfo.props.pageProps && routeInfo.props.pageProps.__N_REDIRECT) {\n            // Use the destination from redirect without adding locale\n            options.locale = false;\n            const destination = routeInfo.props.pageProps.__N_REDIRECT; // check if destination is internal (resolves to a page) and attempt\n            // client-navigation if it is falling back to hard navigation if\n            // it's not\n\n            if (destination.startsWith('/') && routeInfo.props.pageProps.__N_REDIRECT_BASE_PATH !== false) {\n              const parsedHref = (0, _parseRelativeUrl).parseRelativeUrl(destination);\n              parsedHref.pathname = resolveDynamicRoute(parsedHref.pathname, pages);\n              const {\n                url: newUrl,\n                as: newAs\n              } = prepareUrlAs(_this, destination, destination);\n              return _this.change(method, newUrl, newAs, options);\n            }\n\n            handleHardNavigation({\n              url: destination,\n              router: _this\n            });\n            return new Promise(() => {});\n          }\n\n          nextState.isPreview = !!routeInfo.props.__N_PREVIEW; // handle SSG data 404\n\n          if (routeInfo.props.notFound === SSG_DATA_NOT_FOUND) {\n            let notFoundRoute;\n\n            try {\n              yield _this.fetchComponent('/404');\n              notFoundRoute = '/404';\n            } catch (_) {\n              notFoundRoute = '/_error';\n            }\n\n            routeInfo = yield _this.getRouteInfo({\n              route: notFoundRoute,\n              pathname: notFoundRoute,\n              query,\n              as,\n              resolvedAs,\n              routeProps: {\n                shallow: false\n              },\n              locale: nextState.locale,\n              isPreview: nextState.isPreview\n            });\n\n            if ('type' in routeInfo) {\n              throw new Error(`Unexpected middleware effect on /404`);\n            }\n          }\n        }\n\n        if (isQueryUpdating && _this.pathname === '/_error' && ((ref2 = self.__NEXT_DATA__.props) == null ? void 0 : (ref3 = ref2.pageProps) == null ? void 0 : ref3.statusCode) === 500 && ((ref4 = routeInfo.props) == null ? void 0 : ref4.pageProps)) {\n          // ensure statusCode is still correct for static 500 page\n          // when updating query information\n          routeInfo.props.pageProps.statusCode = 500;\n        }\n\n        var _route; // shallow routing is only allowed for same page URL changes.\n\n\n        const isValidShallowRoute = options.shallow && nextState.route === ((_route = routeInfo.route) != null ? _route : route);\n\n        var _scroll;\n\n        const shouldScroll = (_scroll = options.scroll) != null ? _scroll : !isQueryUpdating && !isValidShallowRoute;\n        const resetScroll = shouldScroll ? {\n          x: 0,\n          y: 0\n        } : null;\n        const upcomingScrollState = forcedScroll != null ? forcedScroll : resetScroll; // the new state that the router gonna set\n\n        const upcomingRouterState = _extends({}, nextState, {\n          route,\n          pathname,\n          query,\n          asPath: cleanedAs,\n          isFallback: false\n        }); // When the page being rendered is the 404 page, we should only update the\n        // query parameters. Route changes here might add the basePath when it\n        // wasn't originally present. This is also why this block is before the\n        // below `changeState` call which updates the browser's history (changing\n        // the URL).\n\n\n        if (isQueryUpdating && (_this.pathname === '/404' || _this.pathname === '/_error')) {\n          var ref5, ref6, ref7;\n          routeInfo = yield _this.getRouteInfo({\n            route: _this.pathname,\n            pathname: _this.pathname,\n            query,\n            as,\n            resolvedAs,\n            routeProps: {\n              shallow: false\n            },\n            locale: nextState.locale,\n            isPreview: nextState.isPreview\n          });\n\n          if ('type' in routeInfo) {\n            throw new Error(`Unexpected middleware effect on ${_this.pathname}`);\n          }\n\n          if (_this.pathname === '/_error' && ((ref5 = self.__NEXT_DATA__.props) == null ? void 0 : (ref6 = ref5.pageProps) == null ? void 0 : ref6.statusCode) === 500 && ((ref7 = routeInfo.props) == null ? void 0 : ref7.pageProps)) {\n            // ensure statusCode is still correct for static 500 page\n            // when updating query information\n            routeInfo.props.pageProps.statusCode = 500;\n          }\n\n          try {\n            yield _this.set(upcomingRouterState, routeInfo, upcomingScrollState);\n          } catch (err) {\n            if ((0, _isError).default(err) && err.cancelled) {\n              Router.events.emit('routeChangeError', err, cleanedAs, routeProps);\n            }\n\n            throw err;\n          }\n\n          return true;\n        }\n\n        Router.events.emit('beforeHistoryChange', as, routeProps);\n\n        _this.changeState(method, url, as, options); // for query updates we can skip it if the state is unchanged and we don't\n        // need to scroll\n        // https://github.com/vercel/next.js/issues/37139\n\n\n        const canSkipUpdating = isQueryUpdating && !upcomingScrollState && !readyStateChange && !localeChange && (0, _compareStates).compareRouterStates(upcomingRouterState, _this.state);\n\n        if (!canSkipUpdating) {\n          try {\n            yield _this.set(upcomingRouterState, routeInfo, upcomingScrollState);\n          } catch (e) {\n            if (e.cancelled) routeInfo.error = routeInfo.error || e;else throw e;\n          }\n\n          if (routeInfo.error) {\n            if (!isQueryUpdating) {\n              Router.events.emit('routeChangeError', routeInfo.error, cleanedAs, routeProps);\n            }\n\n            throw routeInfo.error;\n          }\n\n          if (process.env.__NEXT_I18N_SUPPORT) {\n            if (nextState.locale) {\n              document.documentElement.lang = nextState.locale;\n            }\n          }\n\n          if (!isQueryUpdating) {\n            Router.events.emit('routeChangeComplete', as, routeProps);\n          } // A hash mark # is the optional last part of a URL\n\n\n          const hashRegex = /#.+$/;\n\n          if (shouldScroll && hashRegex.test(as)) {\n            _this.scrollToHash(as);\n          }\n        }\n\n        return true;\n      } catch (err1) {\n        if ((0, _isError).default(err1) && err1.cancelled) {\n          return false;\n        }\n\n        throw err1;\n      }\n    })();\n  }\n\n  changeState(method, url, as) {\n    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof window.history === 'undefined') {\n        console.error(`Warning: window.history is not available.`);\n        return;\n      }\n\n      if (typeof window.history[method] === 'undefined') {\n        console.error(`Warning: window.history.${method} is not available`);\n        return;\n      }\n    }\n\n    if (method !== 'pushState' || (0, _utils).getURL() !== as) {\n      this._shallow = options.shallow;\n      window.history[method]({\n        url,\n        as,\n        options,\n        __N: true,\n        key: this._key = method !== 'pushState' ? this._key : createKey()\n      }, // Most browsers currently ignores this parameter, although they may use it in the future.\n      // Passing the empty string here should be safe against future changes to the method.\n      // https://developer.mozilla.org/en-US/docs/Web/API/History/replaceState\n      '', as);\n    }\n  }\n\n  handleRouteInfoError(err, pathname, query, as, routeProps, loadErrorFail) {\n    var _this = this;\n\n    return _async_to_generator(function* () {\n      console.error(err);\n\n      if (err.cancelled) {\n        // bubble up cancellation errors\n        throw err;\n      }\n\n      if ((0, _routeLoader).isAssetError(err) || loadErrorFail) {\n        Router.events.emit('routeChangeError', err, as, routeProps); // If we can't load the page it could be one of following reasons\n        //  1. Page doesn't exists\n        //  2. Page does exist in a different zone\n        //  3. Internal error while loading the page\n        // So, doing a hard reload is the proper way to deal with this.\n\n        handleHardNavigation({\n          url: as,\n          router: _this\n        }); // Changing the URL doesn't block executing the current code path.\n        // So let's throw a cancellation error stop the routing logic.\n\n        throw buildCancellationError();\n      }\n\n      try {\n        let props;\n        const {\n          page: Component,\n          styleSheets\n        } = yield _this.fetchComponent('/_error');\n        const routeInfo = {\n          props,\n          Component,\n          styleSheets,\n          err,\n          error: err\n        };\n\n        if (!routeInfo.props) {\n          try {\n            routeInfo.props = yield _this.getInitialProps(Component, {\n              err,\n              pathname,\n              query\n            });\n          } catch (gipErr) {\n            console.error('Error in error page `getInitialProps`: ', gipErr);\n            routeInfo.props = {};\n          }\n        }\n\n        return routeInfo;\n      } catch (routeInfoErr) {\n        return _this.handleRouteInfoError((0, _isError).default(routeInfoErr) ? routeInfoErr : new Error(routeInfoErr + ''), pathname, query, as, routeProps, true);\n      }\n    })();\n  }\n\n  getRouteInfo(_ref5) {\n    let {\n      route: requestedRoute,\n      pathname,\n      query,\n      as,\n      resolvedAs,\n      routeProps,\n      locale,\n      hasMiddleware,\n      isPreview,\n      unstable_skipClientCache,\n      isQueryUpdating,\n      isMiddlewareRewrite\n    } = _ref5;\n\n    var _this = this;\n\n    return _async_to_generator(function* () {\n      /**\n      * This `route` binding can change if there's a rewrite\n      * so we keep a reference to the original requested route\n      * so we can store the cache for it and avoid re-requesting every time\n      * for shallow routing purposes.\n      */\n      let route = requestedRoute;\n\n      try {\n        var ref, ref8, ref9, ref10;\n        const handleCancelled = getCancelledHandler({\n          route,\n          router: _this\n        });\n        let existingInfo = _this.components[route];\n\n        if (routeProps.shallow && existingInfo && _this.route === route) {\n          return existingInfo;\n        }\n\n        if (hasMiddleware) {\n          existingInfo = undefined;\n        }\n\n        let cachedRouteInfo = existingInfo && !('initial' in existingInfo) && process.env.NODE_ENV !== 'development' ? existingInfo : undefined;\n        const isBackground = isQueryUpdating;\n        const fetchNextDataParams = {\n          dataHref: _this.pageLoader.getDataHref({\n            href: (0, _formatUrl).formatWithValidation({\n              pathname,\n              query\n            }),\n            skipInterpolation: true,\n            asPath: resolvedAs,\n            locale\n          }),\n          hasMiddleware: true,\n          isServerRender: _this.isSsr,\n          parseJSON: true,\n          inflightCache: isBackground ? _this.sbc : _this.sdc,\n          persistCache: !isPreview,\n          isPrefetch: false,\n          unstable_skipClientCache,\n          isBackground\n        };\n        let data = isQueryUpdating && !isMiddlewareRewrite ? null : yield withMiddlewareEffects({\n          fetchData: () => fetchNextData(fetchNextDataParams),\n          asPath: resolvedAs,\n          locale: locale,\n          router: _this\n        }).catch(err => {\n          // we don't hard error during query updating\n          // as it's un-necessary and doesn't need to be fatal\n          // unless it is a fallback route and the props can't\n          // be loaded\n          if (isQueryUpdating) {\n            return null;\n          }\n\n          throw err;\n        });\n\n        if (isQueryUpdating) {\n          if (!data) {\n            data = {\n              json: self.__NEXT_DATA__.props\n            };\n          } else {\n            data.json = self.__NEXT_DATA__.props;\n          }\n        }\n\n        handleCancelled();\n\n        if ((data == null ? void 0 : (ref = data.effect) == null ? void 0 : ref.type) === 'redirect-internal' || (data == null ? void 0 : (ref8 = data.effect) == null ? void 0 : ref8.type) === 'redirect-external') {\n          return data.effect;\n        }\n\n        if ((data == null ? void 0 : (ref9 = data.effect) == null ? void 0 : ref9.type) === 'rewrite') {\n          const resolvedRoute = (0, _removeTrailingSlash).removeTrailingSlash(data.effect.resolvedHref);\n          const pages = yield _this.pageLoader.getPageList(); // during query updating the page must match although during\n          // client-transition a redirect that doesn't match a page\n          // can be returned and this should trigger a hard navigation\n          // which is valid for incremental migration\n\n          if (!isQueryUpdating || pages.includes(resolvedRoute)) {\n            route = resolvedRoute;\n            pathname = data.effect.resolvedHref;\n            query = _extends({}, query, data.effect.parsedAs.query);\n            resolvedAs = (0, _removeBasePath).removeBasePath((0, _normalizeLocalePath).normalizeLocalePath(data.effect.parsedAs.pathname, _this.locales).pathname); // Check again the cache with the new destination.\n\n            existingInfo = _this.components[route];\n\n            if (routeProps.shallow && existingInfo && _this.route === route && !hasMiddleware) {\n              // If we have a match with the current route due to rewrite,\n              // we can copy the existing information to the rewritten one.\n              // Then, we return the information along with the matched route.\n              return _extends({}, existingInfo, {\n                route\n              });\n            }\n          }\n        }\n\n        if ((0, _isApiRoute).isAPIRoute(route)) {\n          handleHardNavigation({\n            url: as,\n            router: _this\n          });\n          return new Promise(() => {});\n        }\n\n        const routeInfo = cachedRouteInfo || (yield _this.fetchComponent(route).then(res => ({\n          Component: res.page,\n          styleSheets: res.styleSheets,\n          __N_SSG: res.mod.__N_SSG,\n          __N_SSP: res.mod.__N_SSP\n        })));\n\n        if (process.env.NODE_ENV !== 'production') {\n          const {\n            isValidElementType\n          } = require('next/dist/compiled/react-is');\n\n          if (!isValidElementType(routeInfo.Component)) {\n            throw new Error(`The default export is not a React Component in page: \"${pathname}\"`);\n          }\n        }\n\n        const wasBailedPrefetch = data == null ? void 0 : (ref10 = data.response) == null ? void 0 : ref10.headers.get('x-middleware-skip');\n        const shouldFetchData = routeInfo.__N_SSG || routeInfo.__N_SSP; // For non-SSG prefetches that bailed before sending data\n        // we clear the cache to fetch full response\n\n        if (wasBailedPrefetch && (data == null ? void 0 : data.dataHref)) {\n          delete _this.sdc[data.dataHref];\n        }\n\n        const {\n          props,\n          cacheKey\n        } = yield _this._getData(_async_to_generator(function* () {\n          if (shouldFetchData) {\n            if ((data == null ? void 0 : data.json) && !wasBailedPrefetch) {\n              return {\n                cacheKey: data.cacheKey,\n                props: data.json\n              };\n            }\n\n            const dataHref = (data == null ? void 0 : data.dataHref) ? data.dataHref : _this.pageLoader.getDataHref({\n              href: (0, _formatUrl).formatWithValidation({\n                pathname,\n                query\n              }),\n              asPath: resolvedAs,\n              locale\n            });\n            const fetched = yield fetchNextData({\n              dataHref,\n              isServerRender: _this.isSsr,\n              parseJSON: true,\n              inflightCache: wasBailedPrefetch ? {} : _this.sdc,\n              persistCache: !isPreview,\n              isPrefetch: false,\n              unstable_skipClientCache\n            });\n            return {\n              cacheKey: fetched.cacheKey,\n              props: fetched.json || {}\n            };\n          }\n\n          return {\n            headers: {},\n            props: yield _this.getInitialProps(routeInfo.Component, // we provide AppTree later so this needs to be `any`\n            {\n              pathname,\n              query,\n              asPath: as,\n              locale,\n              locales: _this.locales,\n              defaultLocale: _this.defaultLocale\n            })\n          };\n        })); // Only bust the data cache for SSP routes although\n        // middleware can skip cache per request with\n        // x-middleware-cache: no-cache as well\n\n        if (routeInfo.__N_SSP && fetchNextDataParams.dataHref && cacheKey) {\n          delete _this.sdc[cacheKey];\n        } // we kick off a HEAD request in the background\n        // when a non-prefetch request is made to signal revalidation\n\n\n        if (!_this.isPreview && routeInfo.__N_SSG && process.env.NODE_ENV !== 'development' && !isQueryUpdating) {\n          fetchNextData(Object.assign({}, fetchNextDataParams, {\n            isBackground: true,\n            persistCache: false,\n            inflightCache: _this.sbc\n          })).catch(() => {});\n        }\n\n        props.pageProps = Object.assign({}, props.pageProps);\n        routeInfo.props = props;\n        routeInfo.route = route;\n        routeInfo.query = query;\n        routeInfo.resolvedAs = resolvedAs;\n        _this.components[route] = routeInfo;\n        return routeInfo;\n      } catch (err) {\n        return _this.handleRouteInfoError((0, _isError).getProperError(err), pathname, query, as, routeProps);\n      }\n    })();\n  }\n\n  set(state, data, resetScroll) {\n    this.state = state;\n    return this.sub(data, this.components['/_app'].Component, resetScroll);\n  }\n  /**\n  * Callback to execute before replacing router state\n  * @param cb callback to be executed\n  */\n\n\n  beforePopState(cb) {\n    this._bps = cb;\n  }\n\n  onlyAHashChange(as) {\n    if (!this.asPath) return false;\n    const [oldUrlNoHash, oldHash] = this.asPath.split('#');\n    const [newUrlNoHash, newHash] = as.split('#'); // Makes sure we scroll to the provided hash if the url/hash are the same\n\n    if (newHash && oldUrlNoHash === newUrlNoHash && oldHash === newHash) {\n      return true;\n    } // If the urls are change, there's more than a hash change\n\n\n    if (oldUrlNoHash !== newUrlNoHash) {\n      return false;\n    } // If the hash has changed, then it's a hash only change.\n    // This check is necessary to handle both the enter and\n    // leave hash === '' cases. The identity case falls through\n    // and is treated as a next reload.\n\n\n    return oldHash !== newHash;\n  }\n\n  scrollToHash(as) {\n    const [, hash = ''] = as.split('#'); // Scroll to top if the hash is just `#` with no value or `#top`\n    // To mirror browsers\n\n    if (hash === '' || hash === 'top') {\n      handleSmoothScroll(() => window.scrollTo(0, 0));\n      return;\n    } // Decode hash to make non-latin anchor works.\n\n\n    const rawHash = decodeURIComponent(hash); // First we check if the element by id is found\n\n    const idEl = document.getElementById(rawHash);\n\n    if (idEl) {\n      handleSmoothScroll(() => idEl.scrollIntoView());\n      return;\n    } // If there's no element with the id, we check the `name` property\n    // To mirror browsers\n\n\n    const nameEl = document.getElementsByName(rawHash)[0];\n\n    if (nameEl) {\n      handleSmoothScroll(() => nameEl.scrollIntoView());\n    }\n  }\n\n  urlIsNew(asPath) {\n    return this.asPath !== asPath;\n  }\n  /**\n  * Prefetch page code, you may wait for the data during page rendering.\n  * This feature only works in production!\n  * @param url the href of prefetched page\n  * @param asPath the as path of the prefetched page\n  */\n\n\n  prefetch(url) {\n    let asPath = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : url;\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    var _this = this;\n\n    return _async_to_generator(function* () {\n      // Prefetch is not supported in development mode because it would trigger on-demand-entries\n      if (process.env.NODE_ENV !== 'production') {\n        return;\n      }\n\n      if (typeof window !== 'undefined' && (0, _isBot).isBot(window.navigator.userAgent)) {\n        // No prefetches for bots that render the link since they are typically navigating\n        // links via the equivalent of a hard navigation and hence never utilize these\n        // prefetches.\n        return;\n      }\n\n      let parsed = (0, _parseRelativeUrl).parseRelativeUrl(url);\n      let {\n        pathname,\n        query\n      } = parsed;\n      const originalPathname = pathname;\n\n      if (process.env.__NEXT_I18N_SUPPORT) {\n        if (options.locale === false) {\n          pathname = (0, _normalizeLocalePath).normalizeLocalePath(pathname, _this.locales).pathname;\n          parsed.pathname = pathname;\n          url = (0, _formatUrl).formatWithValidation(parsed);\n          let parsedAs = (0, _parseRelativeUrl).parseRelativeUrl(asPath);\n          const localePathResult = (0, _normalizeLocalePath).normalizeLocalePath(parsedAs.pathname, _this.locales);\n          parsedAs.pathname = localePathResult.pathname;\n          options.locale = localePathResult.detectedLocale || _this.defaultLocale;\n          asPath = (0, _formatUrl).formatWithValidation(parsedAs);\n        }\n      }\n\n      const pages = yield _this.pageLoader.getPageList();\n      let resolvedAs = asPath;\n      const locale = typeof options.locale !== 'undefined' ? options.locale || undefined : _this.locale;\n      const isMiddlewareMatch = yield matchesMiddleware({\n        asPath: asPath,\n        locale: locale,\n        router: _this\n      });\n\n      if (process.env.__NEXT_HAS_REWRITES && asPath.startsWith('/')) {\n        let rewrites;\n        ({\n          __rewrites: rewrites\n        } = yield (0, _routeLoader).getClientBuildManifest());\n        const rewritesResult = (0, _resolveRewrites).default((0, _addBasePath).addBasePath((0, _addLocale).addLocale(asPath, _this.locale), true), pages, rewrites, parsed.query, p => resolveDynamicRoute(p, pages), _this.locales);\n\n        if (rewritesResult.externalDest) {\n          return;\n        }\n\n        if (!isMiddlewareMatch) {\n          resolvedAs = (0, _removeLocale).removeLocale((0, _removeBasePath).removeBasePath(rewritesResult.asPath), _this.locale);\n        }\n\n        if (rewritesResult.matchedPage && rewritesResult.resolvedHref) {\n          // if this directly matches a page we need to update the href to\n          // allow the correct page chunk to be loaded\n          pathname = rewritesResult.resolvedHref;\n          parsed.pathname = pathname;\n\n          if (!isMiddlewareMatch) {\n            url = (0, _formatUrl).formatWithValidation(parsed);\n          }\n        }\n      }\n\n      parsed.pathname = resolveDynamicRoute(parsed.pathname, pages);\n\n      if ((0, _isDynamic).isDynamicRoute(parsed.pathname)) {\n        pathname = parsed.pathname;\n        parsed.pathname = pathname;\n        Object.assign(query, (0, _routeMatcher).getRouteMatcher((0, _routeRegex).getRouteRegex(parsed.pathname))((0, _parsePath).parsePath(asPath).pathname) || {});\n\n        if (!isMiddlewareMatch) {\n          url = (0, _formatUrl).formatWithValidation(parsed);\n        }\n      }\n\n      const data = process.env.__NEXT_MIDDLEWARE_PREFETCH === 'strict' ? null : yield withMiddlewareEffects({\n        fetchData: () => fetchNextData({\n          dataHref: _this.pageLoader.getDataHref({\n            href: (0, _formatUrl).formatWithValidation({\n              pathname: originalPathname,\n              query\n            }),\n            skipInterpolation: true,\n            asPath: resolvedAs,\n            locale\n          }),\n          hasMiddleware: true,\n          isServerRender: _this.isSsr,\n          parseJSON: true,\n          inflightCache: _this.sdc,\n          persistCache: !_this.isPreview,\n          isPrefetch: true\n        }),\n        asPath: asPath,\n        locale: locale,\n        router: _this\n      });\n      /**\n      * If there was a rewrite we apply the effects of the rewrite on the\n      * current parameters for the prefetch.\n      */\n\n      if ((data == null ? void 0 : data.effect.type) === 'rewrite') {\n        parsed.pathname = data.effect.resolvedHref;\n        pathname = data.effect.resolvedHref;\n        query = _extends({}, query, data.effect.parsedAs.query);\n        resolvedAs = data.effect.parsedAs.pathname;\n        url = (0, _formatUrl).formatWithValidation(parsed);\n      }\n      /**\n      * If there is a redirect to an external destination then we don't have\n      * to prefetch content as it will be unused.\n      */\n\n\n      if ((data == null ? void 0 : data.effect.type) === 'redirect-external') {\n        return;\n      }\n\n      const route = (0, _removeTrailingSlash).removeTrailingSlash(pathname);\n      yield Promise.all([_this.pageLoader._isSsg(route).then(isSsg => {\n        return isSsg ? fetchNextData({\n          dataHref: (data == null ? void 0 : data.json) ? data == null ? void 0 : data.dataHref : _this.pageLoader.getDataHref({\n            href: url,\n            asPath: resolvedAs,\n            locale: locale\n          }),\n          isServerRender: false,\n          parseJSON: true,\n          inflightCache: _this.sdc,\n          persistCache: !_this.isPreview,\n          isPrefetch: true,\n          unstable_skipClientCache: options.unstable_skipClientCache || options.priority && !!process.env.__NEXT_OPTIMISTIC_CLIENT_CACHE\n        }).then(() => false) : false;\n      }), _this.pageLoader[options.priority ? 'loadPage' : 'prefetch'](route)]);\n    })();\n  }\n\n  fetchComponent(route) {\n    var _this = this;\n\n    return _async_to_generator(function* () {\n      const handleCancelled = getCancelledHandler({\n        route,\n        router: _this\n      });\n\n      try {\n        const componentResult = yield _this.pageLoader.loadPage(route);\n        handleCancelled();\n        return componentResult;\n      } catch (err) {\n        handleCancelled();\n        throw err;\n      }\n    })();\n  }\n\n  _getData(fn) {\n    let cancelled = false;\n\n    const cancel = () => {\n      cancelled = true;\n    };\n\n    this.clc = cancel;\n    return fn().then(data => {\n      if (cancel === this.clc) {\n        this.clc = null;\n      }\n\n      if (cancelled) {\n        const err = new Error('Loading initial props cancelled');\n        err.cancelled = true;\n        throw err;\n      }\n\n      return data;\n    });\n  }\n\n  _getFlightData(dataHref) {\n    // Do not cache RSC flight response since it's not a static resource\n    return fetchNextData({\n      dataHref,\n      isServerRender: true,\n      parseJSON: false,\n      inflightCache: this.sdc,\n      persistCache: false,\n      isPrefetch: false\n    }).then(_ref6 => {\n      let {\n        text\n      } = _ref6;\n      return {\n        data: text\n      };\n    });\n  }\n\n  getInitialProps(Component, ctx) {\n    const {\n      Component: App\n    } = this.components['/_app'];\n\n    const AppTree = this._wrapApp(App);\n\n    ctx.AppTree = AppTree;\n    return (0, _utils).loadGetInitialProps(App, {\n      AppTree,\n      Component,\n      router: this,\n      ctx\n    });\n  }\n\n  get route() {\n    return this.state.route;\n  }\n\n  get pathname() {\n    return this.state.pathname;\n  }\n\n  get query() {\n    return this.state.query;\n  }\n\n  get asPath() {\n    return this.state.asPath;\n  }\n\n  get locale() {\n    return this.state.locale;\n  }\n\n  get isFallback() {\n    return this.state.isFallback;\n  }\n\n  get isPreview() {\n    return this.state.isPreview;\n  }\n\n  constructor(pathname1, query1, as1, _ref7) {\n    let {\n      initialProps,\n      pageLoader,\n      App,\n      wrapApp,\n      Component,\n      err,\n      subscription,\n      isFallback,\n      locale,\n      locales,\n      defaultLocale,\n      domainLocales,\n      isPreview\n    } = _ref7;\n    // Server Data Cache (full data requests)\n    this.sdc = {}; // Server Background Cache (HEAD requests)\n\n    this.sbc = {};\n    this.isFirstPopStateEvent = true;\n    this._key = createKey();\n\n    this.onPopState = e => {\n      const {\n        isFirstPopStateEvent\n      } = this;\n      this.isFirstPopStateEvent = false;\n      const state = e.state;\n\n      if (!state) {\n        // We get state as undefined for two reasons.\n        //  1. With older safari (< 8) and older chrome (< 34)\n        //  2. When the URL changed with #\n        //\n        // In the both cases, we don't need to proceed and change the route.\n        // (as it's already changed)\n        // But we can simply replace the state with the new changes.\n        // Actually, for (1) we don't need to nothing. But it's hard to detect that event.\n        // So, doing the following for (1) does no harm.\n        const {\n          pathname,\n          query\n        } = this;\n        this.changeState('replaceState', (0, _formatUrl).formatWithValidation({\n          pathname: (0, _addBasePath).addBasePath(pathname),\n          query\n        }), (0, _utils).getURL());\n        return;\n      } // __NA is used to identify if the history entry can be handled by the app-router.\n\n\n      if (state.__NA) {\n        window.location.reload();\n        return;\n      }\n\n      if (!state.__N) {\n        return;\n      } // Safari fires popstateevent when reopening the browser.\n\n\n      if (isFirstPopStateEvent && this.locale === state.options.locale && state.as === this.asPath) {\n        return;\n      }\n\n      let forcedScroll;\n      const {\n        url,\n        as,\n        options,\n        key\n      } = state;\n\n      if (process.env.__NEXT_SCROLL_RESTORATION) {\n        if (manualScrollRestoration) {\n          if (this._key !== key) {\n            // Snapshot current scroll position:\n            try {\n              sessionStorage.setItem('__next_scroll_' + this._key, JSON.stringify({\n                x: self.pageXOffset,\n                y: self.pageYOffset\n              }));\n            } catch (e) {} // Restore old scroll position:\n\n\n            try {\n              const v = sessionStorage.getItem('__next_scroll_' + key);\n              forcedScroll = JSON.parse(v);\n            } catch (e1) {\n              forcedScroll = {\n                x: 0,\n                y: 0\n              };\n            }\n          }\n        }\n      }\n\n      this._key = key;\n      const {\n        pathname\n      } = (0, _parseRelativeUrl).parseRelativeUrl(url); // Make sure we don't re-render on initial load,\n      // can be caused by navigating back from an external site\n\n      if (this.isSsr && as === (0, _addBasePath).addBasePath(this.asPath) && pathname === (0, _addBasePath).addBasePath(this.pathname)) {\n        return;\n      } // If the downstream application returns falsy, return.\n      // They will then be responsible for handling the event.\n\n\n      if (this._bps && !this._bps(state)) {\n        return;\n      }\n\n      this.change('replaceState', url, as, Object.assign({}, options, {\n        shallow: options.shallow && this._shallow,\n        locale: options.locale || this.defaultLocale,\n        // @ts-ignore internal value not exposed on types\n        _h: 0\n      }), forcedScroll);\n    }; // represents the current component key\n\n\n    const route = (0, _removeTrailingSlash).removeTrailingSlash(pathname1); // set up the component cache (by route keys)\n\n    this.components = {}; // We should not keep the cache, if there's an error\n    // Otherwise, this cause issues when when going back and\n    // come again to the errored page.\n\n    if (pathname1 !== '/_error') {\n      this.components[route] = {\n        Component,\n        initial: true,\n        props: initialProps,\n        err,\n        __N_SSG: initialProps && initialProps.__N_SSG,\n        __N_SSP: initialProps && initialProps.__N_SSP\n      };\n    }\n\n    this.components['/_app'] = {\n      Component: App,\n      styleSheets: []\n    }; // Backwards compat for Router.router.events\n    // TODO: Should be remove the following major version as it was never documented\n\n    this.events = Router.events;\n    this.pageLoader = pageLoader; // if auto prerendered and dynamic route wait to update asPath\n    // until after mount to prevent hydration mismatch\n\n    const autoExportDynamic = (0, _isDynamic).isDynamicRoute(pathname1) && self.__NEXT_DATA__.autoExport;\n\n    this.basePath = process.env.__NEXT_ROUTER_BASEPATH || '';\n    this.sub = subscription;\n    this.clc = null;\n    this._wrapApp = wrapApp; // make sure to ignore extra popState in safari on navigating\n    // back from external site\n\n    this.isSsr = true;\n    this.isLocaleDomain = false;\n    this.isReady = !!(self.__NEXT_DATA__.gssp || self.__NEXT_DATA__.gip || self.__NEXT_DATA__.appGip && !self.__NEXT_DATA__.gsp || !autoExportDynamic && !self.location.search && !process.env.__NEXT_HAS_REWRITES);\n\n    if (process.env.__NEXT_I18N_SUPPORT) {\n      this.locales = locales;\n      this.defaultLocale = defaultLocale;\n      this.domainLocales = domainLocales;\n      this.isLocaleDomain = !!(0, _detectDomainLocale).detectDomainLocale(domainLocales, self.location.hostname);\n    }\n\n    this.state = {\n      route,\n      pathname: pathname1,\n      query: query1,\n      asPath: autoExportDynamic ? pathname1 : as1,\n      isPreview: !!isPreview,\n      locale: process.env.__NEXT_I18N_SUPPORT ? locale : undefined,\n      isFallback\n    };\n    this._initialMatchesMiddlewarePromise = Promise.resolve(false);\n\n    if (typeof window !== 'undefined') {\n      // make sure \"as\" doesn't start with double slashes or else it can\n      // throw an error as it's considered invalid\n      if (!as1.startsWith('//')) {\n        // in order for `e.state` to work on the `onpopstate` event\n        // we have to register the initial route upon initialization\n        const options = {\n          locale\n        };\n        const asPath = (0, _utils).getURL();\n        this._initialMatchesMiddlewarePromise = matchesMiddleware({\n          router: this,\n          locale,\n          asPath\n        }).then(matches => {\n          options._shouldResolveHref = as1 !== pathname1;\n          this.changeState('replaceState', matches ? asPath : (0, _formatUrl).formatWithValidation({\n            pathname: (0, _addBasePath).addBasePath(pathname1),\n            query: query1\n          }), asPath, options);\n          return matches;\n        });\n      }\n\n      window.addEventListener('popstate', this.onPopState); // enable custom scroll restoration handling when available\n      // otherwise fallback to browser's default handling\n\n      if (process.env.__NEXT_SCROLL_RESTORATION) {\n        if (manualScrollRestoration) {\n          window.history.scrollRestoration = 'manual';\n        }\n      }\n    }\n  }\n\n}\n\nRouter.events = (0, _mitt).default();\nexports.default = Router;","map":{"version":3,"mappings":"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","names":["matchesMiddleware","isLocalURL","interpolateAs","resolveHref","handleSmoothScroll","createKey","buildCancellationError","Object","assign","Error","cancelled","options","arguments","_async_to_generator","matchers","Promise","resolve","router","pageLoader","getMiddleware","pathname","asPathname","parsePath","asPath","cleanedAs","hasBasePath","removeBasePath","asWithBasePathAndLocale","addBasePath","addLocale","locale","some","m","RegExp","regexp","test","stripOrigin","url","origin","getLocationOrigin","startsWith","substring","length","omit","object","keys","omitted","forEach","key","includes","isAbsoluteUrl","locationOrigin","resolved","URL","_","route","query","interpolatedRoute","dynamicRegex","getRouteRegex","dynamicGroups","groups","dynamicMatches","getRouteMatcher","params","every","param","value","repeat","optional","replaced","Array","isArray","replace","map","segment","encodeURIComponent","join","result","href","resolveAs","base","urlAsString","formatWithValidation","urlProtoMatch","match","urlAsStringNoProto","slice","urlParts","split","console","error","normalizedUrl","normalizeRepeatedSlashes","finalUrl","normalizePathTrailingSlash","interpolatedAs","isDynamicRoute","searchParams","searchParamsToUrlQuery","hash","resolvedHref","prepareUrlAs","as","resolvedAs","hrefWasAbsolute","asWasAbsolute","preparedUrl","preparedAs","resolveDynamicRoute","pages","cleanPathname","removeTrailingSlash","denormalizePagePath","page","re","getMiddlewareData","source","response","nextConfig","basePath","i18n","locales","trailingSlash","Boolean","process","env","__NEXT_TRAILING_SLASH","rewriteHeader","headers","get","rewriteTarget","matchedPath","parsedRewriteTarget","parseRelativeUrl","pathnameInfo","getNextPathnameInfo","parseData","fsPathname","all","getPageList","getClientBuildManifest","then","__rewrites","rewrites","normalizeLocalePath","parsedSource","__NEXT_HAS_REWRITES","resolveRewrites","default","path","matchedPage","parsedAs","resolvedPathname","matches","type","src","formatNextPathnameInfo","_extends","defaultLocale","buildId","destination","redirectTarget","newAs","newUrl","withMiddlewareEffects","fetchData","data","effect","dataHref","json","text","cacheKey","manualScrollRestoration","__NEXT_SCROLL_RESTORATION","window","history","v","sessionStorage","setItem","removeItem","n","SSG_DATA_NOT_FOUND","Symbol","fetchRetry","attempts","fetch","credentials","method","ok","status","fn","htmlElement","document","documentElement","existing","style","scrollBehavior","dontForceLayout","getClientRects","tryToParseAsJSON","JSON","parse","fetchNextData","inflightCache","isPrefetch","hasMiddleware","isServerRender","parseJSON","persistCache","isBackground","unstable_skipClientCache","location","getData","purpose","notFound","markAssetError","NODE_ENV","catch","err","message","undefined","Math","random","toString","handleHardNavigation","getCancelledHandler","cancel","clc","handleCancelled","Router","reload","back","forward","push","_key","stringify","x","self","pageXOffset","y","pageYOffset","change","forcedScroll","isQueryUpdating","_h","shouldResolveHref","_shouldResolveHref","nextState","_this","state","readyStateChange","isReady","isSsr","prevLocale","__NEXT_I18N_SUPPORT","localePathResult","detectedLocale","didNavigate","ref","detectedDomain","detectDomainLocale","domainLocales","isLocaleDomain","hostname","domain","asNoBasePath","http","ST","performance","mark","shallow","scroll","routeProps","_inFlightRoute","events","emit","removeLocale","localeChange","onlyAHashChange","changeState","scrollToHash","set","components","isError","parsed","urlIsNew","parsedAsPathname","isMiddlewareRewrite","isMiddlewareMatch","rewritesResult","p","externalDest","routeMatch","routeRegex","shouldInterpolate","missingParams","filter","warn","ref3","routeInfo","getRouteInfo","isPreview","isFallback","cleanedParsedPathname","prefixedAs","rewriteAs","localeResult","curRouteMatch","component","Component","unstable_scriptLoader","scripts","concat","script","handleClientScriptLoad","props","__N_SSG","__N_SSP","pageProps","__N_REDIRECT","__N_REDIRECT_BASE_PATH","parsedHref","__N_PREVIEW","notFoundRoute","fetchComponent","__NEXT_DATA__","statusCode","isValidShallowRoute","shouldScroll","resetScroll","upcomingScrollState","upcomingRouterState","ref6","canSkipUpdating","compareRouterStates","e","lang","hashRegex","getURL","_shallow","__N","handleRouteInfoError","loadErrorFail","isAssetError","styleSheets","getInitialProps","gipErr","routeInfoErr","requestedRoute","existingInfo","cachedRouteInfo","fetchNextDataParams","getDataHref","skipInterpolation","sbc","sdc","resolvedRoute","isAPIRoute","res","mod","isValidElementType","require","wasBailedPrefetch","shouldFetchData","_getData","fetched","getProperError","sub","beforePopState","cb","_bps","oldUrlNoHash","oldHash","newUrlNoHash","newHash","scrollTo","rawHash","decodeURIComponent","idEl","getElementById","scrollIntoView","nameEl","getElementsByName","prefetch","isBot","navigator","userAgent","originalPathname","__NEXT_MIDDLEWARE_PREFETCH","_isSsg","isSsg","priority","__NEXT_OPTIMISTIC_CLIENT_CACHE","componentResult","loadPage","_getFlightData","ctx","App","AppTree","_wrapApp","loadGetInitialProps","constructor","initialProps","wrapApp","subscription","isFirstPopStateEvent","onPopState","__NA","getItem","initial","autoExportDynamic","autoExport","__NEXT_ROUTER_BASEPATH","gssp","gip","appGip","gsp","search","_initialMatchesMiddlewarePromise","addEventListener","scrollRestoration","mitt"],"sources":["../../../../../src/shared/lib/router/router.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}