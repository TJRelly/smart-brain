{"ast":null,"code":"import _classCallCheck from\"C:/Users/xxter/Documents/Coding/smart-brain/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/xxter/Documents/Coding/smart-brain/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/Users/xxter/Documents/Coding/smart-brain/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/xxter/Documents/Coding/smart-brain/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import'./App.css';import Navigation from'./components/Navigation/Navigation';import Logo from'./components/Logo/Logo';import ImageLinkForm from'./components/ImageLinkForm/ImageLinkForm';import Rank from'./components/Rank/Rank';import FaceRecognition from'./components/FaceRecognition/FaceRecognition';import ParticlesBg from'particles-bg';import SignIn from'./components/SignIn/SignIn';import Register from'./components/Register/Register';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);_this=_super.call(this);_this.loadUser=function(data){_this.setState({user:{id:data.id,name:data.name,email:data.email,entries:data.entries,joined:data.joined}});};_this.onRouteChange=function(route){if(route==='signout'){_this.setState({isSignedIn:false});}else if(route==='home'){_this.setState({isSignedIn:true});}_this.setState({route:route});};_this.calculateFaceLocation=function(data){var image=document.getElementById('inputimage');var width=Number(image.width);var height=Number(image.height);return JSON.parse(data,null,2).outputs[0].data.regions.map(function(face){var clarifaiFace=face.region_info.bounding_box;return{leftCol:clarifaiFace.left_col*width,topRow:clarifaiFace.top_row*height,rightCol:width-clarifaiFace.right_col*width,bottomRow:height-clarifaiFace.bottom_row*height};});};_this.displayFaceBox=function(boxes){_this.setState({boxes:boxes});};_this.onInputChange=function(event){_this.setState({input:event.target.value});};_this.onSubmit=function(){_this.setState({imageUrl:_this.state.input});var raw=JSON.stringify({\"user_app_id\":{\"user_id\":\"clarifai\",\"app_id\":\"main\"},\"inputs\":[{\"data\":{\"image\":{\"url\":_this.state.input}}}]});var requestOptions={method:'POST',headers:{'Accept':'application/json','Authorization':'Key dc909b76df6646348782f475407e883b'},body:raw};// NOTE: MODEL_VERSION_ID is optional, you can also call prediction with the MODEL_ID only\n// https://api.clarifai.com/v2/models/{YOUR_MODEL_ID}/outputs\n// this will default to the latest version_id\nfetch(\"https://api.clarifai.com/v2/models/face-detection/versions/6dc7e46bc9124c5c8824be4822abe105/outputs\",requestOptions).then(function(response){return response.text();}).then(function(result){_this.displayFaceBox(_this.calculateFaceLocation(result));if(result){fetch('http://localhost:3000/image',{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify({id:_this.state.user.id})}).then(function(result){return result.json();}).then(function(count){_this.setState(Object.assign(_this.state.user,{entries:count}));});}}).catch(function(error){return console.log('error',error);});};_this.state={input:'',imageUrl:'',boxes:[],route:'signin',isSignedIn:false,user:{id:'',name:'',email:'',entries:0,joined:''}};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){fetch('http://localhost:3000').then(function(response){return response.json();}).then(console.log);}},{key:\"render\",value:function render(){var _this$state=this.state,isSignedIn=_this$state.isSignedIn,imageUrl=_this$state.imageUrl,route=_this$state.route,boxes=_this$state.boxes;return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(ParticlesBg,{color:\"#FFFFFF\",num:100,type:\"cobweb\",bg:true}),/*#__PURE__*/_jsx(Navigation,{isSignedIn:isSignedIn,onRouteChange:this.onRouteChange}),route==='home'?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Logo,{}),/*#__PURE__*/_jsx(Rank,{name:this.state.user.name,entries:this.state.user.entries}),/*#__PURE__*/_jsx(ImageLinkForm,{onInputChange:this.onInputChange,onSubmit:this.onSubmit}),/*#__PURE__*/_jsx(FaceRecognition,{boxes:boxes,imageUrl:imageUrl})]}):route!=='register'?/*#__PURE__*/_jsx(SignIn,{loadUser:this.loadUser,onRouteChange:this.onRouteChange}):/*#__PURE__*/_jsx(Register,{loadUser:this.loadUser,onRouteChange:this.onRouteChange})]});}}]);return App;}(Component);export default App;","map":{"version":3,"names":["React","Component","Navigation","Logo","ImageLinkForm","Rank","FaceRecognition","ParticlesBg","SignIn","Register","App","loadUser","data","setState","user","id","name","email","entries","joined","onRouteChange","route","isSignedIn","calculateFaceLocation","image","document","getElementById","width","Number","height","JSON","parse","outputs","regions","map","face","clarifaiFace","region_info","bounding_box","leftCol","left_col","topRow","top_row","rightCol","right_col","bottomRow","bottom_row","displayFaceBox","boxes","onInputChange","event","input","target","value","onSubmit","imageUrl","state","raw","stringify","requestOptions","method","headers","body","fetch","then","response","text","result","json","count","Object","assign","catch","error","console","log"],"sources":["C:/Users/xxter/Documents/Coding/smart-brain/src/App.js"],"sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport Navigation from './components/Navigation/Navigation';\nimport Logo from './components/Logo/Logo';\nimport ImageLinkForm from './components/ImageLinkForm/ImageLinkForm';\nimport Rank from './components/Rank/Rank';\nimport FaceRecognition from './components/FaceRecognition/FaceRecognition';\nimport ParticlesBg from 'particles-bg'\nimport SignIn from './components/SignIn/SignIn';\nimport Register from './components/Register/Register';\n\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = {\n      input: '',\n      imageUrl: '',\n      boxes: [],\n      route: 'signin',\n      isSignedIn: false,\n      user: {\n        id: '',\n        name: '',\n        email: '',\n        entries: 0,\n        joined: ''\n      }\n    }\n  }\n\n  loadUser = (data) => {\n    this.setState({\n      user: {\n        id: data.id,\n        name: data.name,\n        email: data.email,\n        entries: data.entries,\n        joined: data.joined\n      }\n    })\n  }\n\n  componentDidMount() {\n    fetch('http://localhost:3000')\n      .then(response => response.json())\n      .then(console.log)\n  }\n\n  onRouteChange = (route) => {\n    if (route === 'signout') {\n      this.setState({ isSignedIn: false })\n    } else if (route === 'home') {\n      this.setState({ isSignedIn: true })\n    }\n    this.setState({ route: route })\n  }\n\n  calculateFaceLocation = data => {\n    const image = document.getElementById('inputimage');\n    const width = Number(image.width);\n    const height = Number(image.height);\n    return JSON\n      .parse(data, null, 2)\n      .outputs[0].data.regions\n      .map(face => {\n        const clarifaiFace = face.region_info.bounding_box;\n        return {\n          leftCol: clarifaiFace.left_col * width,\n          topRow: clarifaiFace.top_row * height,\n          rightCol: width - clarifaiFace.right_col * width,\n          bottomRow: height - clarifaiFace.bottom_row * height,\n        };\n      });\n  };\n\n  displayFaceBox = (boxes) => {\n    this.setState({ boxes: boxes });\n  }\n\n  onInputChange = (event) => {\n    this.setState({ input: event.target.value })\n  }\n\n  onSubmit = () => {\n    this.setState({ imageUrl: this.state.input })\n\n    const raw = JSON.stringify({\n      \"user_app_id\": {\n        \"user_id\": \"clarifai\",\n        \"app_id\": \"main\"\n      },\n      \"inputs\": [\n        {\n          \"data\": {\n            \"image\": {\n              \"url\": this.state.input\n            }\n          }\n        }\n      ]\n    });\n\n    const requestOptions = {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Authorization': 'Key dc909b76df6646348782f475407e883b'\n      },\n      body: raw\n    };\n\n    // NOTE: MODEL_VERSION_ID is optional, you can also call prediction with the MODEL_ID only\n    // https://api.clarifai.com/v2/models/{YOUR_MODEL_ID}/outputs\n    // this will default to the latest version_id\n\n    fetch(`https://api.clarifai.com/v2/models/face-detection/versions/6dc7e46bc9124c5c8824be4822abe105/outputs`, requestOptions)\n      .then(response => response.text())\n      .then(result => {\n        this.displayFaceBox(this.calculateFaceLocation(result))\n        if (result) {\n          fetch('http://localhost:3000/image', {\n            method: 'PUT',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n              id: this.state.user.id\n            })\n          })\n            .then(result => result.json())\n            .then(count => {\n              this.setState(Object.assign(this.state.user, { entries: count }))\n            })\n        }\n      })\n      .catch(error => console.log('error', error));\n  }\n\n  render() {\n    const { isSignedIn, imageUrl, route, boxes } = this.state;\n    return (\n      <div className=\"App\" >\n        <ParticlesBg\n          color=\"#FFFFFF\"\n          num={100}\n          type=\"cobweb\"\n          bg={true} />\n        <Navigation\n          isSignedIn={isSignedIn}\n          onRouteChange={this.onRouteChange} />\n        {route === 'home'\n          ? <>\n            <Logo />\n            <Rank\n              name={this.state.user.name}\n              entries={this.state.user.entries}\n            />\n            <ImageLinkForm\n              onInputChange={this.onInputChange}\n              onSubmit={this.onSubmit}\n            />\n            <FaceRecognition\n              boxes={boxes}\n              imageUrl={imageUrl}\n            />\n          </>\n          : (\n            route !== 'register'\n              ? <SignIn\n                loadUser={this.loadUser}\n                onRouteChange={this.onRouteChange}\n              />\n              : <Register\n                loadUser={this.loadUser}\n                onRouteChange={this.onRouteChange}\n              />\n          )\n\n        }\n      </div>\n    );\n  }\n}\n\nexport default App;\n"],"mappings":"ofAAA,MAAOA,MAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAO,WAAP,CACA,MAAOC,WAAP,KAAuB,oCAAvB,CACA,MAAOC,KAAP,KAAiB,wBAAjB,CACA,MAAOC,cAAP,KAA0B,0CAA1B,CACA,MAAOC,KAAP,KAAiB,wBAAjB,CACA,MAAOC,gBAAP,KAA4B,8CAA5B,CACA,MAAOC,YAAP,KAAwB,cAAxB,CACA,MAAOC,OAAP,KAAmB,4BAAnB,CACA,MAAOC,SAAP,KAAqB,gCAArB,C,gJAGMC,I,0FACJ,cAAc,qCACZ,wBADY,MAkBdC,QAlBc,CAkBH,SAACC,IAAD,CAAU,CACnB,MAAKC,QAAL,CAAc,CACZC,IAAI,CAAE,CACJC,EAAE,CAAEH,IAAI,CAACG,EADL,CAEJC,IAAI,CAAEJ,IAAI,CAACI,IAFP,CAGJC,KAAK,CAAEL,IAAI,CAACK,KAHR,CAIJC,OAAO,CAAEN,IAAI,CAACM,OAJV,CAKJC,MAAM,CAAEP,IAAI,CAACO,MALT,CADM,CAAd,EASD,CA5Ba,OAoCdC,aApCc,CAoCE,SAACC,KAAD,CAAW,CACzB,GAAIA,KAAK,GAAK,SAAd,CAAyB,CACvB,MAAKR,QAAL,CAAc,CAAES,UAAU,CAAE,KAAd,CAAd,EACD,CAFD,IAEO,IAAID,KAAK,GAAK,MAAd,CAAsB,CAC3B,MAAKR,QAAL,CAAc,CAAES,UAAU,CAAE,IAAd,CAAd,EACD,CACD,MAAKT,QAAL,CAAc,CAAEQ,KAAK,CAAEA,KAAT,CAAd,EACD,CA3Ca,OA6CdE,qBA7Cc,CA6CU,SAAAX,IAAI,CAAI,CAC9B,GAAMY,MAAK,CAAGC,QAAQ,CAACC,cAAT,CAAwB,YAAxB,CAAd,CACA,GAAMC,MAAK,CAAGC,MAAM,CAACJ,KAAK,CAACG,KAAP,CAApB,CACA,GAAME,OAAM,CAAGD,MAAM,CAACJ,KAAK,CAACK,MAAP,CAArB,CACA,MAAOC,KAAI,CACRC,KADI,CACEnB,IADF,CACQ,IADR,CACc,CADd,EAEJoB,OAFI,CAEI,CAFJ,EAEOpB,IAFP,CAEYqB,OAFZ,CAGJC,GAHI,CAGA,SAAAC,IAAI,CAAI,CACX,GAAMC,aAAY,CAAGD,IAAI,CAACE,WAAL,CAAiBC,YAAtC,CACA,MAAO,CACLC,OAAO,CAAEH,YAAY,CAACI,QAAb,CAAwBb,KAD5B,CAELc,MAAM,CAAEL,YAAY,CAACM,OAAb,CAAuBb,MAF1B,CAGLc,QAAQ,CAAEhB,KAAK,CAAGS,YAAY,CAACQ,SAAb,CAAyBjB,KAHtC,CAILkB,SAAS,CAAEhB,MAAM,CAAGO,YAAY,CAACU,UAAb,CAA0BjB,MAJzC,CAAP,CAMD,CAXI,CAAP,CAYD,CA7Da,OA+DdkB,cA/Dc,CA+DG,SAACC,KAAD,CAAW,CAC1B,MAAKnC,QAAL,CAAc,CAAEmC,KAAK,CAAEA,KAAT,CAAd,EACD,CAjEa,OAmEdC,aAnEc,CAmEE,SAACC,KAAD,CAAW,CACzB,MAAKrC,QAAL,CAAc,CAAEsC,KAAK,CAAED,KAAK,CAACE,MAAN,CAAaC,KAAtB,CAAd,EACD,CArEa,OAuEdC,QAvEc,CAuEH,UAAM,CACf,MAAKzC,QAAL,CAAc,CAAE0C,QAAQ,CAAE,MAAKC,KAAL,CAAWL,KAAvB,CAAd,EAEA,GAAMM,IAAG,CAAG3B,IAAI,CAAC4B,SAAL,CAAe,CACzB,cAAe,CACb,UAAW,UADE,CAEb,SAAU,MAFG,CADU,CAKzB,SAAU,CACR,CACE,OAAQ,CACN,QAAS,CACP,MAAO,MAAKF,KAAL,CAAWL,KADX,CADH,CADV,CADQ,CALe,CAAf,CAAZ,CAgBA,GAAMQ,eAAc,CAAG,CACrBC,MAAM,CAAE,MADa,CAErBC,OAAO,CAAE,CACP,SAAU,kBADH,CAEP,gBAAiB,sCAFV,CAFY,CAMrBC,IAAI,CAAEL,GANe,CAAvB,CASA;AACA;AACA;AAEAM,KAAK,uGAAwGJ,cAAxG,CAAL,CACGK,IADH,CACQ,SAAAC,QAAQ,QAAIA,SAAQ,CAACC,IAAT,EAAJ,EADhB,EAEGF,IAFH,CAEQ,SAAAG,MAAM,CAAI,CACd,MAAKpB,cAAL,CAAoB,MAAKxB,qBAAL,CAA2B4C,MAA3B,CAApB,EACA,GAAIA,MAAJ,CAAY,CACVJ,KAAK,CAAC,6BAAD,CAAgC,CACnCH,MAAM,CAAE,KAD2B,CAEnCC,OAAO,CAAE,CAAE,eAAgB,kBAAlB,CAF0B,CAGnCC,IAAI,CAAEhC,IAAI,CAAC4B,SAAL,CAAe,CACnB3C,EAAE,CAAE,MAAKyC,KAAL,CAAW1C,IAAX,CAAgBC,EADD,CAAf,CAH6B,CAAhC,CAAL,CAOGiD,IAPH,CAOQ,SAAAG,MAAM,QAAIA,OAAM,CAACC,IAAP,EAAJ,EAPd,EAQGJ,IARH,CAQQ,SAAAK,KAAK,CAAI,CACb,MAAKxD,QAAL,CAAcyD,MAAM,CAACC,MAAP,CAAc,MAAKf,KAAL,CAAW1C,IAAzB,CAA+B,CAAEI,OAAO,CAAEmD,KAAX,CAA/B,CAAd,EACD,CAVH,EAWD,CACF,CAjBH,EAkBGG,KAlBH,CAkBS,SAAAC,KAAK,QAAIC,QAAO,CAACC,GAAR,CAAY,OAAZ,CAAqBF,KAArB,CAAJ,EAlBd,EAmBD,CA1Ha,CAEZ,MAAKjB,KAAL,CAAa,CACXL,KAAK,CAAE,EADI,CAEXI,QAAQ,CAAE,EAFC,CAGXP,KAAK,CAAE,EAHI,CAIX3B,KAAK,CAAE,QAJI,CAKXC,UAAU,CAAE,KALD,CAMXR,IAAI,CAAE,CACJC,EAAE,CAAE,EADA,CAEJC,IAAI,CAAE,EAFF,CAGJC,KAAK,CAAE,EAHH,CAIJC,OAAO,CAAE,CAJL,CAKJC,MAAM,CAAE,EALJ,CANK,CAAb,CAFY,aAgBb,C,iDAcD,4BAAoB,CAClB4C,KAAK,CAAC,uBAAD,CAAL,CACGC,IADH,CACQ,SAAAC,QAAQ,QAAIA,SAAQ,CAACG,IAAT,EAAJ,EADhB,EAEGJ,IAFH,CAEQU,OAAO,CAACC,GAFhB,EAGD,C,sBA0FD,iBAAS,CACP,gBAA+C,KAAKnB,KAApD,CAAQlC,UAAR,aAAQA,UAAR,CAAoBiC,QAApB,aAAoBA,QAApB,CAA8BlC,KAA9B,aAA8BA,KAA9B,CAAqC2B,KAArC,aAAqCA,KAArC,CACA,mBACE,aAAK,SAAS,CAAC,KAAf,wBACE,KAAC,WAAD,EACE,KAAK,CAAC,SADR,CAEE,GAAG,CAAE,GAFP,CAGE,IAAI,CAAC,QAHP,CAIE,EAAE,CAAE,IAJN,EADF,cAME,KAAC,UAAD,EACE,UAAU,CAAE1B,UADd,CAEE,aAAa,CAAE,KAAKF,aAFtB,EANF,CASGC,KAAK,GAAK,MAAV,cACG,wCACA,KAAC,IAAD,IADA,cAEA,KAAC,IAAD,EACE,IAAI,CAAE,KAAKmC,KAAL,CAAW1C,IAAX,CAAgBE,IADxB,CAEE,OAAO,CAAE,KAAKwC,KAAL,CAAW1C,IAAX,CAAgBI,OAF3B,EAFA,cAMA,KAAC,aAAD,EACE,aAAa,CAAE,KAAK+B,aADtB,CAEE,QAAQ,CAAE,KAAKK,QAFjB,EANA,cAUA,KAAC,eAAD,EACE,KAAK,CAAEN,KADT,CAEE,QAAQ,CAAEO,QAFZ,EAVA,GADH,CAiBGlC,KAAK,GAAK,UAAV,cACI,KAAC,MAAD,EACA,QAAQ,CAAE,KAAKV,QADf,CAEA,aAAa,CAAE,KAAKS,aAFpB,EADJ,cAKI,KAAC,QAAD,EACA,QAAQ,CAAE,KAAKT,QADf,CAEA,aAAa,CAAE,KAAKS,aAFpB,EA/BV,GADF,CAyCD,C,iBAxKenB,S,EA2KlB,cAAeS,IAAf"},"metadata":{},"sourceType":"module"}