{"ast":null,"code":"import _classCallCheck from\"C:/Users/xxter/Documents/Coding/smart-brain/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/xxter/Documents/Coding/smart-brain/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/Users/xxter/Documents/Coding/smart-brain/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/xxter/Documents/Coding/smart-brain/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from\"react\";import\"./App.css\";import Navigation from\"./components/Navigation/Navigation\";import Logo from\"./components/Logo/Logo\";import ImageLinkForm from\"./components/ImageLinkForm/ImageLinkForm\";import Rank from\"./components/Rank/Rank\";import FaceRecognition from\"./components/FaceRecognition/FaceRecognition\";import ParticlesBg from\"particles-bg\";import SignIn from\"./components/SignIn/SignIn\";import Register from\"./components/Register/Register\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var initialState={input:\"\",imageUrl:\"\",boxes:[],route:\"signin\",isSignedIn:false,user:{id:\"\",name:\"\",email:\"\",entries:0,joined:\"\"}};var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);_this=_super.call(this);_this.loadUser=function(data){_this.setState({user:{id:data.id,name:data.name,email:data.email,entries:data.entries,joined:data.joined}});};_this.onRouteChange=function(route){if(route===\"signout\"){_this.setState(initialState);}else if(route===\"home\"){_this.setState({isSignedIn:true});}_this.setState({route:route});};_this.calculateFaceLocation=function(data){var image=document.getElementById(\"inputimage\");var width=Number(image.width);var height=Number(image.height);return JSON.parse(data,null,2).outputs[0].data.regions.map(function(face){var clarifaiFace=face.region_info.bounding_box;return{leftCol:clarifaiFace.left_col*width,topRow:clarifaiFace.top_row*height,rightCol:width-clarifaiFace.right_col*width,bottomRow:height-clarifaiFace.bottom_row*height};});};_this.displayFaceBox=function(boxes){_this.setState({boxes:boxes});};_this.onInputChange=function(event){_this.setState({input:event.target.value});};_this.onSubmit=function(){_this.setState({imageUrl:_this.state.input});var returnClarifaiRequestOptions=function returnClarifaiRequestOptions(imageUrl){var raw=JSON.stringify({user_app_id:{user_id:\"clarifai\",app_id:\"main\"},inputs:[{data:{image:{url:imageUrl}}}]});var requestOptions={method:\"POST\",headers:{Accept:\"application/json\",Authorization:\"Key dc909b76df6646348782f475407e883b\"},body:raw};console.log(\"Request options: \"+requestOptions);return requestOptions;};fetch(\"https://api.clarifai.com/v2/models/face-detection/outputs\",returnClarifaiRequestOptions(_this.state.input)).then(function(response){return response.text();}).then(function(result){console.log(result);_this.displayFaceBox(_this.calculateFaceLocation(result));if(result){fetch(\"https://smart-brain-api.up.railway.app/image\",{method:\"PUT\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({id:_this.state.user.id})}).then(function(result){return result.json();}).then(function(count){_this.setState(Object.assign(_this.state.user,{entries:count}));});}}).catch(function(error){return console.log(\"error\",error);});};_this.state=initialState;return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){fetch(\"https://smart-brain-api.up.railway.app/\").then(function(response){return response.json();});}},{key:\"render\",value:function render(){var _this$state=this.state,isSignedIn=_this$state.isSignedIn,imageUrl=_this$state.imageUrl,route=_this$state.route,boxes=_this$state.boxes;return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(ParticlesBg,{color:\"#FFFFFF\",num:100,type:\"cobweb\",bg:true}),/*#__PURE__*/_jsx(Navigation,{isSignedIn:isSignedIn,onRouteChange:this.onRouteChange}),route===\"home\"?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Logo,{}),/*#__PURE__*/_jsx(Rank,{name:this.state.user.name,entries:this.state.user.entries}),/*#__PURE__*/_jsx(ImageLinkForm,{onInputChange:this.onInputChange,onSubmit:this.onSubmit}),/*#__PURE__*/_jsx(FaceRecognition,{boxes:boxes,imageUrl:imageUrl})]}):route!==\"register\"?/*#__PURE__*/_jsx(SignIn,{loadUser:this.loadUser,onRouteChange:this.onRouteChange}):/*#__PURE__*/_jsx(Register,{loadUser:this.loadUser,onRouteChange:this.onRouteChange})]});}}]);return App;}(Component);export default App;","map":{"version":3,"names":["React","Component","Navigation","Logo","ImageLinkForm","Rank","FaceRecognition","ParticlesBg","SignIn","Register","initialState","input","imageUrl","boxes","route","isSignedIn","user","id","name","email","entries","joined","App","loadUser","data","setState","onRouteChange","calculateFaceLocation","image","document","getElementById","width","Number","height","JSON","parse","outputs","regions","map","face","clarifaiFace","region_info","bounding_box","leftCol","left_col","topRow","top_row","rightCol","right_col","bottomRow","bottom_row","displayFaceBox","onInputChange","event","target","value","onSubmit","state","returnClarifaiRequestOptions","raw","stringify","user_app_id","user_id","app_id","inputs","url","requestOptions","method","headers","Accept","Authorization","body","console","log","fetch","then","response","text","result","json","count","Object","assign","catch","error"],"sources":["C:/Users/xxter/Documents/Coding/smart-brain/src/App.js"],"sourcesContent":["import React, { Component } from \"react\"\nimport \"./App.css\"\nimport Navigation from \"./components/Navigation/Navigation\"\nimport Logo from \"./components/Logo/Logo\"\nimport ImageLinkForm from \"./components/ImageLinkForm/ImageLinkForm\"\nimport Rank from \"./components/Rank/Rank\"\nimport FaceRecognition from \"./components/FaceRecognition/FaceRecognition\"\nimport ParticlesBg from \"particles-bg\"\nimport SignIn from \"./components/SignIn/SignIn\"\nimport Register from \"./components/Register/Register\"\n\nconst initialState = {\n  input: \"\",\n  imageUrl: \"\",\n  boxes: [],\n  route: \"signin\",\n  isSignedIn: false,\n  user: {\n    id: \"\",\n    name: \"\",\n    email: \"\",\n    entries: 0,\n    joined: \"\",\n  },\n}\n\nclass App extends Component {\n  constructor() {\n    super()\n    this.state = initialState\n  }\n\n  loadUser = (data) => {\n    this.setState({\n      user: {\n        id: data.id,\n        name: data.name,\n        email: data.email,\n        entries: data.entries,\n        joined: data.joined,\n      },\n    })\n  }\n\n  componentDidMount() {\n    fetch(\"https://smart-brain-api.up.railway.app/\").then((response) =>\n      response.json()\n    )\n  }\n\n  onRouteChange = (route) => {\n    if (route === \"signout\") {\n      this.setState(initialState)\n    } else if (route === \"home\") {\n      this.setState({ isSignedIn: true })\n    }\n    this.setState({ route: route })\n  }\n\n  calculateFaceLocation = (data) => {\n    const image = document.getElementById(\"inputimage\")\n    const width = Number(image.width)\n    const height = Number(image.height)\n    return JSON.parse(data, null, 2).outputs[0].data.regions.map((face) => {\n      const clarifaiFace = face.region_info.bounding_box\n      return {\n        leftCol: clarifaiFace.left_col * width,\n        topRow: clarifaiFace.top_row * height,\n        rightCol: width - clarifaiFace.right_col * width,\n        bottomRow: height - clarifaiFace.bottom_row * height,\n      }\n    })\n  }\n\n  displayFaceBox = (boxes) => {\n    this.setState({ boxes: boxes })\n  }\n\n  onInputChange = (event) => {\n    this.setState({ input: event.target.value })\n  }\n\n  onSubmit = () => {\n    this.setState({ imageUrl: this.state.input })\n\n    const returnClarifaiRequestOptions = (imageUrl) => {\n      const raw = JSON.stringify({\n        user_app_id: {\n          user_id: \"clarifai\",\n          app_id: \"main\",\n        },\n        inputs: [\n          {\n            data: {\n              image: {\n                url: imageUrl,\n              },\n            },\n          },\n        ],\n      })\n\n      const requestOptions = {\n        method: \"POST\",\n        headers: {\n          Accept: \"application/json\",\n          Authorization: \"Key dc909b76df6646348782f475407e883b\",\n        },\n        body: raw,\n      }\n      console.log(\"Request options: \" + requestOptions)\n      return requestOptions\n    }\n\n    fetch(\n      `https://api.clarifai.com/v2/models/face-detection/outputs`,\n      returnClarifaiRequestOptions(this.state.input)\n    )\n      .then((response) => response.text())\n      .then((result) => {\n        console.log(result)\n        this.displayFaceBox(this.calculateFaceLocation(result))\n        if (result) {\n          fetch(\"https://smart-brain-api.up.railway.app/image\", {\n            method: \"PUT\",\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify({\n              id: this.state.user.id,\n            }),\n          })\n            .then((result) => result.json())\n            .then((count) => {\n              this.setState(Object.assign(this.state.user, { entries: count }))\n            })\n        }\n      })\n      .catch((error) => console.log(\"error\", error))\n  }\n\n  render() {\n    const { isSignedIn, imageUrl, route, boxes } = this.state\n    return (\n      <div className=\"App\">\n        <ParticlesBg color=\"#FFFFFF\" num={100} type=\"cobweb\" bg={true} />\n        <Navigation\n          isSignedIn={isSignedIn}\n          onRouteChange={this.onRouteChange}\n        />\n        {route === \"home\" ? (\n          <>\n            <Logo />\n            <Rank\n              name={this.state.user.name}\n              entries={this.state.user.entries}\n            />\n            <ImageLinkForm\n              onInputChange={this.onInputChange}\n              onSubmit={this.onSubmit}\n            />\n            <FaceRecognition boxes={boxes} imageUrl={imageUrl} />\n          </>\n        ) : route !== \"register\" ? (\n          <SignIn loadUser={this.loadUser} onRouteChange={this.onRouteChange} />\n        ) : (\n          <Register\n            loadUser={this.loadUser}\n            onRouteChange={this.onRouteChange}\n          />\n        )}\n      </div>\n    )\n  }\n}\n\nexport default App\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}