{"ast":null,"code":"/*!\n* RAFManager v0.1.0\n*\n* Copyright 2018-2018, ajiemath <ajiemath@gmail.com>\n* Licensed under the MIT license\n* http://www.opensource.org/licenses/mit-license\n*\n*/\n!function (t, i) {\n  \"object\" == typeof exports && \"undefined\" != typeof module ? module.exports = i() : \"function\" == typeof define && define.amd ? define(i) : t.RAFManager = i();\n}(this, function () {\n  \"use strict\";\n\n  return function () {\n    for (var t = [\"ms\", \"moz\", \"webkit\", \"o\"], i = 0; i < t.length && !window.requestAnimationFrame; ++i) window.requestAnimationFrame = window[t[i] + \"RequestAnimationFrame\"], window.cancelAnimationFrame = window[t[i] + \"CancelAnimationFrame\"] || window[t[i] + \"CancelRequestAnimationFrame\"];\n  }(), {\n    timer: 0,\n    state: \"stop\",\n    animations: [],\n    add: function (t) {\n      var i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 60,\n          n = {\n        callback: t,\n        fps: i,\n        n: 60 / i,\n        param: arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null,\n        i: 0\n      };\n      return this.animations.push(n), this.animations.length >= 1 && this.start(), this;\n    },\n    getIndex: function (t) {\n      for (var i = 0; i < this.animations.length; i++) {\n        if (this.animations[i].callback === t) return i;\n      }\n\n      return -1;\n    },\n    remove: function (t) {\n      if (!(this.getIndex(t) < 0)) return this.deleteMap(t), 0 === this.animations.length && this.stop(), this;\n    },\n    deleteMap: function (t) {\n      var i = this.getIndex(t),\n          n = this.animations[i];\n\n      for (var e in n) delete n[e];\n\n      this.animations.splice(i, 1);\n    },\n    start: function () {\n      if (\"start\" !== this.state) return this.state = \"start\", this.tick(), this;\n    },\n    stop: function () {\n      if (\"stop\" !== this.state) return this.state = \"stop\", cancelAnimationFrame(this.timer), this;\n    },\n    tick: function () {\n      var t = this;\n      this.timer = requestAnimationFrame(function () {\n        t.tick();\n      });\n\n      for (var i = 0; i < this.animations.length; i++) {\n        var n = this.animations[i],\n            e = n.callback,\n            a = n.param;\n        n.i++, n.i >= n.n && (e(a), n.i = 0);\n      }\n    }\n  };\n});","map":{"version":3,"mappings":"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","names":["vendors","x","length","window","requestAnimationFrame","cancelAnimationFrame","timer","state","animations","add","callback","fps","aniData","n","param","i","push","this","start","remove","getIndex","deleteMap","stop","index","key","splice","tick","t"],"sources":["../src/RAFManager.js"],"sourcesContent":["/**\n *  RAFManager requestAnimationFrame Manager\n * \n *  Simple package\n * \n *  CODE:\n * \n * \t\t// Add to\n *  \t-- RAFManager.add(func);\n * \n *   \t// Add and carry parameters\n *  \t-- const func = data =>{ console.log(data) };\n *  \t-- RAFManager.add(func, 25, { msg:'hello world!' }); \n * \t\t\n * \t\t// remove\n *  \t-- RAFManager.remove(func);\n *  \t-- RAFManager.stop();\t\n*/\n\n// simple polyfill by https://gist.github.com/paulirish/1579671\n(function () {\n\tlet lastTime = 0;\n\tlet vendors = ['ms', 'moz', 'webkit', 'o'];\n\tfor (let x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n\t\twindow.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\n\t\twindow.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame']\n\t\t\t|| window[vendors[x] + 'CancelRequestAnimationFrame'];\n\t}\n}());\n\nconst RAFManager = {\n\ttimer: 0,\n\tstate: 'stop',\n\tanimations: [],\n\n\tadd(callback, fps = 60, param = null) {\n\t\tconst n = 60 / fps;\n\t\tconst aniData = { callback, fps, n, param, i: 0 };\n\t\tthis.animations.push(aniData);\n\t\tif (this.animations.length >= 1) this.start();\n\n\t\treturn this;\n\t},\n\n\tgetIndex(callback) {\n\t\tfor (let i = 0; i < this.animations.length; i++) {\n\t\t\tconst aniData = this.animations[i];\n\t\t\tif (aniData.callback === callback) return i;\n\t\t}\n\n\t\treturn -1;\n\t},\n\n\tremove(callback) {\n\t\tconst index = this.getIndex(callback);\n\t\tif (index < 0) return;\n\n\t\tthis.deleteMap(callback);\n\t\tif (this.animations.length === 0) this.stop();\n\n\t\treturn this;\n\t},\n\n\tdeleteMap(callback) {\n\t\tconst index = this.getIndex(callback);\n\t\tconst aniData = this.animations[index];\n\t\tfor (let key in aniData) delete aniData[key];\n\n\t\tthis.animations.splice(index, 1);\n\t},\n\n\tstart() {\n\t\tif (this.state === 'start') return;\n\n\t\tthis.state = 'start';\n\t\tthis.tick();\n\t\treturn this;\n\t},\n\n\tstop() {\n\t\tif (this.state === 'stop') return;\n\n\t\tthis.state = 'stop';\n\t\tcancelAnimationFrame(this.timer);\n\t\treturn this;\n\t},\n\n\ttick() {\n\t\tthis.timer = requestAnimationFrame(() => { this.tick(); });\n\n\t\tfor (let i = 0; i < this.animations.length; i++) {\n\t\t\tconst aniData = this.animations[i];\n\t\t\tconst callback = aniData.callback;\n\t\t\tconst param = aniData.param;\n\n\t\t\taniData.i++;\n\t\t\tif (aniData.i >= aniData.n) {\n\t\t\t\tcallback(param);\n\t\t\t\taniData.i = 0;\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport default RAFManager;"]},"metadata":{},"sourceType":"script"}