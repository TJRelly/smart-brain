{"ast":null,"code":"'use strict';\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar Promise = require('promise');\n\nvar validUrl = require('valid-url');\n\nvar _require = require('./constants'),\n    GEO_LIMIT_TYPES = _require.GEO_LIMIT_TYPES,\n    ERRORS = _require.ERRORS;\n\nvar _require2 = require('./helpers'),\n    checkType = _require2.checkType,\n    clone = _require2.clone;\n\nvar _require3 = require('./../package.json'),\n    VERSION = _require3.version;\n\nmodule.exports = {\n  wrapToken: function wrapToken(_config, requestFn) {\n    return new Promise(function (resolve, reject) {\n      if (_config.apiKey) {\n        var headers = {\n          Authorization: 'Key ' + _config.apiKey,\n          'X-Clarifai-Client': 'js:' + VERSION\n        };\n        return requestFn(headers).then(resolve, reject);\n      }\n\n      if (_config.sessionToken) {\n        var _headers = {\n          'X-Clarifai-Session-Token': _config.sessionToken,\n          'X-Clarifai-Client': 'js:' + VERSION\n        };\n        return requestFn(_headers).then(resolve, reject);\n      }\n\n      _config.token().then(function (token) {\n        var headers = {\n          Authorization: 'Bearer ' + token.accessToken,\n          'X-Clarifai-Client': 'js:' + VERSION\n        };\n        requestFn(headers).then(resolve, reject);\n      }, reject);\n    });\n  },\n  formatModel: function formatModel() {\n    var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var formatted = {};\n\n    if (data.id === null || data.id === undefined) {\n      throw ERRORS.paramsRequired('Model ID');\n    }\n\n    formatted.id = data.id;\n\n    if (data.name) {\n      formatted.name = data.name;\n    }\n\n    formatted.output_info = {};\n\n    if (data.conceptsMutuallyExclusive !== undefined) {\n      formatted.output_info.output_config = formatted.output_info.output_config || {};\n      formatted.output_info.output_config.concepts_mutually_exclusive = !!data.conceptsMutuallyExclusive;\n    }\n\n    if (data.closedEnvironment !== undefined) {\n      formatted.output_info.output_config = formatted.output_info.output_config || {};\n      formatted.output_info.output_config.closed_environment = !!data.closedEnvironment;\n    }\n\n    if (data.concepts) {\n      formatted.output_info.data = {\n        concepts: data.concepts.map(module.exports.formatConcept)\n      };\n    }\n\n    return formatted;\n  },\n  formatInput: function formatInput(data, includeImage) {\n    var input = checkType(/String/, data) ? {\n      url: data\n    } : data;\n    var formatted = {\n      id: input.id || null,\n      data: {}\n    };\n\n    if (input.concepts) {\n      formatted.data.concepts = input.concepts;\n    }\n\n    if (input.metadata) {\n      formatted.data.metadata = input.metadata;\n    }\n\n    if (input.geo) {\n      formatted.data.geo = {\n        geo_point: input.geo\n      };\n    }\n\n    if (input.regions) {\n      formatted.data.regions = input.regions;\n    }\n\n    if (includeImage !== false) {\n      formatted.data.image = {\n        url: input.url,\n        base64: input.base64,\n        crop: input.crop\n      };\n\n      if (data.allowDuplicateUrl) {\n        formatted.data.image.allow_duplicate_url = true;\n      }\n    }\n\n    return formatted;\n  },\n  formatMediaPredict: function formatMediaPredict(data) {\n    var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'image';\n    var media = void 0;\n\n    if (checkType(/String/, data)) {\n      if (validUrl.isWebUri(data)) {\n        media = {\n          url: data\n        };\n      } else {\n        media = {\n          base64: data\n        };\n      }\n    } else {\n      media = Object.assign({}, data);\n    } // Users can specify their own id to distinguish batch results\n\n\n    var id = void 0;\n\n    if (media.id) {\n      id = media.id;\n      delete media.id;\n    }\n\n    var object = {\n      data: _defineProperty({}, type, media)\n    };\n\n    if (id) {\n      object.id = id;\n    }\n\n    return object;\n  },\n  formatImagesSearch: function formatImagesSearch(image) {\n    var imageQuery = void 0;\n    var input = {\n      input: {\n        data: {}\n      }\n    };\n    var formatted = [];\n\n    if (checkType(/String/, image)) {\n      imageQuery = {\n        url: image\n      };\n    } else {\n      imageQuery = image.url || image.base64 ? {\n        image: {\n          url: image.url,\n          base64: image.base64,\n          crop: image.crop\n        }\n      } : {};\n    }\n\n    input.input.data = imageQuery;\n\n    if (image.id) {\n      input.input.id = image.id;\n      input.input.data = {\n        image: {}\n      };\n\n      if (image.crop) {\n        input.input.data.image.crop = image.crop;\n      }\n    }\n\n    if (image.metadata !== undefined) {\n      input.input.data.metadata = image.metadata;\n    }\n\n    if (image.geo !== undefined) {\n      if (checkType(/Array/, image.geo)) {\n        input.input.data.geo = {\n          geo_box: image.geo.map(function (p) {\n            return {\n              geo_point: p\n            };\n          })\n        };\n      } else if (checkType(/Object/, image.geo)) {\n        if (GEO_LIMIT_TYPES.indexOf(image.geo.type) === -1) {\n          throw ERRORS.INVALID_GEOLIMIT_TYPE;\n        }\n\n        input.input.data.geo = {\n          geo_point: {\n            latitude: image.geo.latitude,\n            longitude: image.geo.longitude\n          },\n          geo_limit: {\n            type: image.geo.type,\n            value: image.geo.value\n          }\n        };\n      }\n    }\n\n    if (image.type !== 'input' && input.input.data.image) {\n      if (input.input.data.metadata || input.input.data.geo) {\n        var dataCopy = {\n          input: {\n            data: clone(input.input.data)\n          }\n        };\n        var imageCopy = {\n          input: {\n            data: clone(input.input.data)\n          }\n        };\n        delete dataCopy.input.data.image;\n        delete imageCopy.input.data.metadata;\n        delete imageCopy.input.data.geo;\n        input = [{\n          output: imageCopy\n        }, dataCopy];\n      } else {\n        input = [{\n          output: input\n        }];\n      }\n    }\n\n    formatted = formatted.concat(input);\n    return formatted;\n  },\n  formatConcept: function formatConcept(concept) {\n    var formatted = concept;\n\n    if (checkType(/String/, concept)) {\n      formatted = {\n        id: concept\n      };\n    }\n\n    return formatted;\n  },\n  formatConceptsSearch: function formatConceptsSearch(query) {\n    if (checkType(/String/, query)) {\n      query = {\n        id: query\n      };\n    }\n\n    var v = {};\n    var type = query.type === 'input' ? 'input' : 'output';\n    delete query.type;\n    v[type] = {\n      data: {\n        concepts: [query]\n      }\n    };\n    return v;\n  },\n  formatObjectForSnakeCase: function formatObjectForSnakeCase(obj) {\n    return Object.keys(obj).reduce(function (o, k) {\n      o[k.replace(/([A-Z])/g, function (r) {\n        return '_' + r.toLowerCase();\n      })] = obj[k];\n      return o;\n    }, {});\n  }\n};","map":{"version":3,"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","Promise","require","validUrl","_require","GEO_LIMIT_TYPES","ERRORS","_require2","checkType","clone","_require3","VERSION","version","module","exports","wrapToken","_config","requestFn","resolve","reject","apiKey","headers","Authorization","then","sessionToken","_headers","token","accessToken","formatModel","data","arguments","length","undefined","formatted","id","paramsRequired","name","output_info","conceptsMutuallyExclusive","output_config","concepts_mutually_exclusive","closedEnvironment","closed_environment","concepts","map","formatConcept","formatInput","includeImage","input","url","metadata","geo","geo_point","regions","image","base64","crop","allowDuplicateUrl","allow_duplicate_url","formatMediaPredict","type","media","isWebUri","assign","object","formatImagesSearch","imageQuery","geo_box","p","indexOf","INVALID_GEOLIMIT_TYPE","latitude","longitude","geo_limit","dataCopy","imageCopy","output","concat","concept","formatConceptsSearch","query","v","formatObjectForSnakeCase","keys","reduce","o","k","replace","r","toLowerCase"],"sources":["C:/Users/xxter/Documents/Coding/smart-brain/node_modules/clarifai/dist/utils.js"],"sourcesContent":["'use strict';\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar Promise = require('promise');\nvar validUrl = require('valid-url');\n\nvar _require = require('./constants'),\n    GEO_LIMIT_TYPES = _require.GEO_LIMIT_TYPES,\n    ERRORS = _require.ERRORS;\n\nvar _require2 = require('./helpers'),\n    checkType = _require2.checkType,\n    clone = _require2.clone;\n\nvar _require3 = require('./../package.json'),\n    VERSION = _require3.version;\n\nmodule.exports = {\n  wrapToken: function wrapToken(_config, requestFn) {\n    return new Promise(function (resolve, reject) {\n      if (_config.apiKey) {\n        var headers = {\n          Authorization: 'Key ' + _config.apiKey,\n          'X-Clarifai-Client': 'js:' + VERSION\n        };\n        return requestFn(headers).then(resolve, reject);\n      }\n      if (_config.sessionToken) {\n        var _headers = {\n          'X-Clarifai-Session-Token': _config.sessionToken,\n          'X-Clarifai-Client': 'js:' + VERSION\n        };\n        return requestFn(_headers).then(resolve, reject);\n      }\n      _config.token().then(function (token) {\n        var headers = {\n          Authorization: 'Bearer ' + token.accessToken,\n          'X-Clarifai-Client': 'js:' + VERSION\n        };\n        requestFn(headers).then(resolve, reject);\n      }, reject);\n    });\n  },\n  formatModel: function formatModel() {\n    var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var formatted = {};\n    if (data.id === null || data.id === undefined) {\n      throw ERRORS.paramsRequired('Model ID');\n    }\n    formatted.id = data.id;\n    if (data.name) {\n      formatted.name = data.name;\n    }\n    formatted.output_info = {};\n    if (data.conceptsMutuallyExclusive !== undefined) {\n      formatted.output_info.output_config = formatted.output_info.output_config || {};\n      formatted.output_info.output_config.concepts_mutually_exclusive = !!data.conceptsMutuallyExclusive;\n    }\n    if (data.closedEnvironment !== undefined) {\n      formatted.output_info.output_config = formatted.output_info.output_config || {};\n      formatted.output_info.output_config.closed_environment = !!data.closedEnvironment;\n    }\n    if (data.concepts) {\n      formatted.output_info.data = {\n        concepts: data.concepts.map(module.exports.formatConcept)\n      };\n    }\n    return formatted;\n  },\n  formatInput: function formatInput(data, includeImage) {\n    var input = checkType(/String/, data) ? { url: data } : data;\n    var formatted = {\n      id: input.id || null,\n      data: {}\n    };\n    if (input.concepts) {\n      formatted.data.concepts = input.concepts;\n    }\n    if (input.metadata) {\n      formatted.data.metadata = input.metadata;\n    }\n    if (input.geo) {\n      formatted.data.geo = { geo_point: input.geo };\n    }\n    if (input.regions) {\n      formatted.data.regions = input.regions;\n    }\n    if (includeImage !== false) {\n      formatted.data.image = {\n        url: input.url,\n        base64: input.base64,\n        crop: input.crop\n      };\n      if (data.allowDuplicateUrl) {\n        formatted.data.image.allow_duplicate_url = true;\n      }\n    }\n    return formatted;\n  },\n  formatMediaPredict: function formatMediaPredict(data) {\n    var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'image';\n\n    var media = void 0;\n    if (checkType(/String/, data)) {\n      if (validUrl.isWebUri(data)) {\n        media = {\n          url: data\n        };\n      } else {\n        media = {\n          base64: data\n        };\n      }\n    } else {\n      media = Object.assign({}, data);\n    }\n\n    // Users can specify their own id to distinguish batch results\n    var id = void 0;\n    if (media.id) {\n      id = media.id;\n      delete media.id;\n    }\n\n    var object = {\n      data: _defineProperty({}, type, media)\n    };\n\n    if (id) {\n      object.id = id;\n    }\n\n    return object;\n  },\n  formatImagesSearch: function formatImagesSearch(image) {\n    var imageQuery = void 0;\n    var input = { input: { data: {} } };\n    var formatted = [];\n    if (checkType(/String/, image)) {\n      imageQuery = { url: image };\n    } else {\n      imageQuery = image.url || image.base64 ? {\n        image: {\n          url: image.url,\n          base64: image.base64,\n          crop: image.crop\n        }\n      } : {};\n    }\n\n    input.input.data = imageQuery;\n    if (image.id) {\n      input.input.id = image.id;\n      input.input.data = { image: {} };\n      if (image.crop) {\n        input.input.data.image.crop = image.crop;\n      }\n    }\n    if (image.metadata !== undefined) {\n      input.input.data.metadata = image.metadata;\n    }\n    if (image.geo !== undefined) {\n      if (checkType(/Array/, image.geo)) {\n        input.input.data.geo = {\n          geo_box: image.geo.map(function (p) {\n            return { geo_point: p };\n          })\n        };\n      } else if (checkType(/Object/, image.geo)) {\n        if (GEO_LIMIT_TYPES.indexOf(image.geo.type) === -1) {\n          throw ERRORS.INVALID_GEOLIMIT_TYPE;\n        }\n        input.input.data.geo = {\n          geo_point: {\n            latitude: image.geo.latitude,\n            longitude: image.geo.longitude\n          },\n          geo_limit: {\n            type: image.geo.type,\n            value: image.geo.value\n          }\n        };\n      }\n    }\n    if (image.type !== 'input' && input.input.data.image) {\n      if (input.input.data.metadata || input.input.data.geo) {\n        var dataCopy = { input: { data: clone(input.input.data) } };\n        var imageCopy = { input: { data: clone(input.input.data) } };\n        delete dataCopy.input.data.image;\n        delete imageCopy.input.data.metadata;\n        delete imageCopy.input.data.geo;\n        input = [{ output: imageCopy }, dataCopy];\n      } else {\n        input = [{ output: input }];\n      }\n    }\n    formatted = formatted.concat(input);\n    return formatted;\n  },\n  formatConcept: function formatConcept(concept) {\n    var formatted = concept;\n    if (checkType(/String/, concept)) {\n      formatted = {\n        id: concept\n      };\n    }\n    return formatted;\n  },\n  formatConceptsSearch: function formatConceptsSearch(query) {\n    if (checkType(/String/, query)) {\n      query = { id: query };\n    }\n    var v = {};\n    var type = query.type === 'input' ? 'input' : 'output';\n    delete query.type;\n    v[type] = {\n      data: {\n        concepts: [query]\n      }\n    };\n    return v;\n  },\n  formatObjectForSnakeCase: function formatObjectForSnakeCase(obj) {\n    return Object.keys(obj).reduce(function (o, k) {\n      o[k.replace(/([A-Z])/g, function (r) {\n        return '_' + r.toLowerCase();\n      })] = obj[k];\n      return o;\n    }, {});\n  }\n};"],"mappings":"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"},"metadata":{},"sourceType":"script"}