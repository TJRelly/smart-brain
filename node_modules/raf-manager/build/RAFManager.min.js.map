{"version":3,"file":"RAFManager.min.js","sources":["../src/RAFManager.js"],"sourcesContent":["/**\n *  RAFManager requestAnimationFrame Manager\n * \n *  Simple package\n * \n *  CODE:\n * \n * \t\t// Add to\n *  \t-- RAFManager.add(func);\n * \n *   \t// Add and carry parameters\n *  \t-- const func = data =>{ console.log(data) };\n *  \t-- RAFManager.add(func, 25, { msg:'hello world!' }); \n * \t\t\n * \t\t// remove\n *  \t-- RAFManager.remove(func);\n *  \t-- RAFManager.stop();\t\n*/\n\n// simple polyfill by https://gist.github.com/paulirish/1579671\n(function () {\n\tlet lastTime = 0;\n\tlet vendors = ['ms', 'moz', 'webkit', 'o'];\n\tfor (let x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n\t\twindow.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\n\t\twindow.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame']\n\t\t\t|| window[vendors[x] + 'CancelRequestAnimationFrame'];\n\t}\n}());\n\nconst RAFManager = {\n\ttimer: 0,\n\tstate: 'stop',\n\tanimations: [],\n\n\tadd(callback, fps = 60, param = null) {\n\t\tconst n = 60 / fps;\n\t\tconst aniData = { callback, fps, n, param, i: 0 };\n\t\tthis.animations.push(aniData);\n\t\tif (this.animations.length >= 1) this.start();\n\n\t\treturn this;\n\t},\n\n\tgetIndex(callback) {\n\t\tfor (let i = 0; i < this.animations.length; i++) {\n\t\t\tconst aniData = this.animations[i];\n\t\t\tif (aniData.callback === callback) return i;\n\t\t}\n\n\t\treturn -1;\n\t},\n\n\tremove(callback) {\n\t\tconst index = this.getIndex(callback);\n\t\tif (index < 0) return;\n\n\t\tthis.deleteMap(callback);\n\t\tif (this.animations.length === 0) this.stop();\n\n\t\treturn this;\n\t},\n\n\tdeleteMap(callback) {\n\t\tconst index = this.getIndex(callback);\n\t\tconst aniData = this.animations[index];\n\t\tfor (let key in aniData) delete aniData[key];\n\n\t\tthis.animations.splice(index, 1);\n\t},\n\n\tstart() {\n\t\tif (this.state === 'start') return;\n\n\t\tthis.state = 'start';\n\t\tthis.tick();\n\t\treturn this;\n\t},\n\n\tstop() {\n\t\tif (this.state === 'stop') return;\n\n\t\tthis.state = 'stop';\n\t\tcancelAnimationFrame(this.timer);\n\t\treturn this;\n\t},\n\n\ttick() {\n\t\tthis.timer = requestAnimationFrame(() => { this.tick(); });\n\n\t\tfor (let i = 0; i < this.animations.length; i++) {\n\t\t\tconst aniData = this.animations[i];\n\t\t\tconst callback = aniData.callback;\n\t\t\tconst param = aniData.param;\n\n\t\t\taniData.i++;\n\t\t\tif (aniData.i >= aniData.n) {\n\t\t\t\tcallback(param);\n\t\t\t\taniData.i = 0;\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport default RAFManager;"],"names":["vendors","x","length","window","requestAnimationFrame","cancelAnimationFrame","callback","fps","aniData","n","param","i","animations","push","this","start","getIndex","deleteMap","stop","index","key","splice","state","tick","timer"],"mappings":";;;;;;;;6LAoBC,mBAEIA,GAAW,KAAM,MAAO,SAAU,KAC7BC,EAAI,EAAGA,EAAID,EAAQE,SAAWC,OAAOC,wBAAyBH,SAC/DG,sBAAwBD,OAAOH,EAAQC,GAAK,gCAC5CI,qBAAuBF,OAAOH,EAAQC,GAAK,yBAC9CE,OAAOH,EAAQC,GAAK,+BANzB,UAWO,QACA,kCAGHK,OAAUC,yDAAM,GAEbC,GAAYF,WAAUC,MAAKE,EADvB,GAAKF,EACqBG,6DAFL,KAEYC,EAAG,eACzCC,WAAWC,KAAKL,GACjBM,KAAKF,WAAWV,QAAU,GAAGY,KAAKC,QAE/BD,wBAGCR,OACH,IAAIK,EAAI,EAAGA,EAAIG,KAAKF,WAAWV,OAAQS,IAAK,IAChCG,KAAKF,WAAWD,GACpBL,WAAaA,EAAU,OAAOK,SAGnC,mBAGFL,QACQQ,KAAKE,SAASV,GAChB,eAEPW,UAAUX,GACgB,IAA3BQ,KAAKF,WAAWV,QAAcY,KAAKI,OAEhCJ,yBAGER,OACHa,EAAQL,KAAKE,SAASV,GACtBE,EAAUM,KAAKF,WAAWO,OAC3B,IAAIC,KAAOZ,SAAgBA,EAAQY,GAExCN,KAAKF,WAAWS,OAAOF,EAAO,wBAIX,UAAfL,KAAKQ,kBAEJA,MAAQ,aACRC,OACET,yBAIY,SAAfA,KAAKQ,kBAEJA,MAAQ,4BACQR,KAAKU,OACnBV,sCAIFU,MAAQpB,sBAAsB,aAAamB,aAE3C,IAAIZ,EAAI,EAAGA,EAAIG,KAAKF,WAAWV,OAAQS,IAAK,KAC1CH,EAAUM,KAAKF,WAAWD,GAC1BL,EAAWE,EAAQF,SACnBI,EAAQF,EAAQE,QAEdC,IACJH,EAAQG,GAAKH,EAAQC,MACfC,KACDC,EAAI"}